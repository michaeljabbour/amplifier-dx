<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amplifier DX</title>
  <link rel="icon" type="image/png" href="amplifierlogo.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">
  <style>
    /* =================================================================
       DESIGN TOKENS
       ================================================================= */
    :root {
      --bg-0: #0d0d0d;
      --bg-1: #171717;
      --bg-2: #212121;
      --bg-3: #2a2a2a;
      --text-0: #fafafa;
      --text-1: #a1a1a1;
      --text-2: #6b6b6b;
      --border: #2e2e2e;
      --blue: #3b82f6;
      --green: #10b981;
      --purple: #a855f7;
      --orange: #f97316;
      --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;
      --radius: 8px;
      --transition: 150ms ease;
    }

    /* =================================================================
       RESET
       ================================================================= */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-sans);
      background: var(--bg-0);
      color: var(--text-0);
      min-height: 100vh;
      font-size: 15px;
      line-height: 1.6;
    }

    a { color: var(--blue); text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* List styles */
    ul, ol {
      margin: 12px 0;
      padding-left: 28px;
    }

    li {
      margin-bottom: 6px;
      line-height: 1.6;
    }

    ul li { list-style-type: disc; }
    ol li { list-style-type: decimal; }

    /* =================================================================
       NAV
       ================================================================= */
    .nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(13, 13, 13, 0.8);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
    }

    .nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-left { display: flex; align-items: center; gap: 32px; }

    .nav-logo {
      font-weight: 600;
      font-size: 16px;
      color: var(--text-0);
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      cursor: pointer;
    }

    .nav-logo img {
      width: 24px;
      height: 24px;
      object-fit: contain;
    }

    .nav-links { display: flex; gap: 4px; }

    .nav-link {
      padding: 8px 12px;
      border-radius: 6px;
      color: var(--text-1);
      font-size: 14px;
      background: none;
      border: none;
      cursor: pointer;
      transition: all var(--transition);
    }

    .nav-link:hover { color: var(--text-0); background: var(--bg-2); }
    .nav-link.active { color: var(--text-0); background: var(--bg-2); }

    .nav-right { display: flex; align-items: center; gap: 12px; }

    .export-wrap { position: relative; }

    .export-btn {
      padding: 8px 14px;
      border-radius: 6px;
      background: var(--bg-2);
      color: var(--text-0);
      font-size: 14px;
      border: 1px solid var(--border);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .export-btn:hover { background: var(--bg-3); }

    .export-caret {
      font-size: 10px;
      transition: transform var(--transition);
    }

    .export-caret.open { transform: rotate(180deg); }

    .export-menu {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 4px;
      background: var(--bg-2);
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
      min-width: 220px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      display: none;
    }

    .export-menu.show { display: block; }

    .export-item {
      display: block;
      width: 100%;
      padding: 10px 14px;
      text-align: left;
      background: none;
      border: none;
      color: var(--text-0);
      font-size: 14px;
      cursor: pointer;
      transition: background var(--transition);
    }

    .export-item:hover { background: var(--bg-3); }
    .export-item span { color: var(--text-2); font-size: 12px; display: block; }

    .nav-github {
      padding: 8px 14px;
      border-radius: 6px;
      background: var(--bg-2);
      color: var(--text-0);
      font-size: 14px;
      border: 1px solid var(--border);
      text-decoration: none;
    }

    .nav-github:hover { background: var(--bg-3); text-decoration: none; }

    /* =================================================================
       SECTIONS
       ================================================================= */
    .section {
      max-width: 900px;
      margin: 0 auto;
      padding: 48px 24px;
      display: none;
    }

    .section.active { display: block; }

    .section h1 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
    }

    .section h2 {
      font-size: 20px;
      font-weight: 600;
      margin: 40px 0 16px;
    }

    .section h3 {
      font-size: 16px;
      font-weight: 600;
      margin: 24px 0 12px;
      color: var(--text-0);
    }

    .section-desc {
      color: var(--text-1);
      font-size: 16px;
      margin-bottom: 32px;
    }

    .section-desc code {
      background: var(--bg-2);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 13px;
    }

    /* =================================================================
       HERO
       ================================================================= */
    .hero { text-align: center; padding: 48px 0; }

    .hero-eyebrow { font-size: 13px; color: var(--text-2); margin-bottom: 16px; }

    .hero-title {
      font-size: 48px;
      font-weight: 700;
      letter-spacing: -0.03em;
      background: linear-gradient(135deg, var(--text-0) 0%, var(--text-1) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-subtitle { font-size: 20px; color: var(--text-1); margin: 8px 0 24px; }

    .hero-description {
      color: var(--text-1);
      max-width: 540px;
      margin: 0 auto 32px;
      line-height: 1.7;
    }

    .hero-actions { display: flex; justify-content: center; gap: 12px; }

    .btn-primary {
      padding: 12px 24px;
      border-radius: 8px;
      background: var(--text-0);
      color: var(--bg-0);
      font-size: 15px;
      font-weight: 500;
      border: none;
      cursor: pointer;
      transition: all var(--transition);
    }

    .btn-primary:hover { opacity: 0.9; }

    .btn-secondary {
      padding: 12px 24px;
      border-radius: 8px;
      background: var(--bg-2);
      color: var(--text-0);
      font-size: 15px;
      font-weight: 500;
      border: 1px solid var(--border);
      text-decoration: none;
    }

    .btn-secondary:hover { background: var(--bg-3); text-decoration: none; }

    /* =================================================================
       FEATURE CARDS
       ================================================================= */
    .feature-cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin: 48px 0;
    }

    .feature-card {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      padding: 24px;
      background: var(--bg-1);
      border: 1px solid var(--border);
    }

    .feature-gradient {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100px;
      opacity: 0.15;
    }

    .feature-gradient.blue { background: linear-gradient(180deg, var(--blue) 0%, transparent 100%); }
    .feature-gradient.purple { background: linear-gradient(180deg, var(--purple) 0%, transparent 100%); }
    .feature-gradient.green { background: linear-gradient(180deg, var(--green) 0%, transparent 100%); }

    .feature-label {
      position: relative;
      font-size: 18px;
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
    }

    .feature-card p {
      position: relative;
      color: var(--text-1);
      font-size: 14px;
      margin: 0;
    }

    @media (max-width: 700px) {
      .feature-cards { grid-template-columns: 1fr; }
    }

    /* =================================================================
       QUICKSTART PREVIEW
       ================================================================= */
    .quickstart-preview {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 32px;
      margin: 48px 0;
    }

    .quickstart-preview h2 { margin: 0 0 8px; font-size: 18px; }
    .quickstart-preview .section-desc { margin-bottom: 20px; }

    /* =================================================================
       START BUILDING
       ================================================================= */
    .start-building h2 { margin: 0 0 20px; font-size: 18px; }

    .start-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .start-item {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      padding: 16px;
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 10px;
      text-align: left;
      cursor: pointer;
      transition: all var(--transition);
      color: var(--text-0);
      font-family: inherit;
    }

    .start-item:hover { background: var(--bg-2); border-color: var(--text-2); }

    .start-icon {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-2);
      border-radius: 8px;
      font-size: 16px;
      flex-shrink: 0;
      color: var(--text-0);
    }

    .start-item strong { display: block; font-size: 14px; margin-bottom: 2px; color: var(--text-0); }
    .start-item span { display: block; font-size: 13px; color: var(--text-1); }

    @media (max-width: 600px) {
      .start-grid { grid-template-columns: 1fr; }
    }

    /* =================================================================
       TABS
       ================================================================= */
    .tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 12px;
    }

    .tab {
      padding: 8px 16px;
      border-radius: 6px;
      background: none;
      border: none;
      color: var(--text-1);
      font-size: 14px;
      cursor: pointer;
      transition: all var(--transition);
    }

    .tab:hover { color: var(--text-0); }
    .tab.active { background: var(--bg-2); color: var(--text-0); }

    .tab-content { display: none; animation: fadeIn 0.2s ease; }
    .tab-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* =================================================================
       CODE BLOCKS
       ================================================================= */
    .code-block {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
      margin: 16px 0;
    }

    .code-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: var(--bg-2);
      border-bottom: 1px solid var(--border);
    }

    .code-lang {
      font-size: 11px;
      color: var(--text-2);
      text-transform: uppercase;
      font-family: var(--font-mono);
    }

    .copy-btn {
      padding: 4px 10px;
      border-radius: 4px;
      background: var(--bg-3);
      border: none;
      color: var(--text-1);
      font-size: 12px;
      cursor: pointer;
    }

    .copy-btn:hover { color: var(--text-0); }
    .copy-btn.copied { background: var(--green); color: white; }

    .code-block pre {
      padding: 16px;
      overflow-x: auto;
      margin: 0;
      background: var(--bg-0) !important;
    }

    .code-block code {
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.6;
      background: transparent !important;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    /* Prism token colors */
    .token.comment { color: #6a737d !important; font-style: italic; }
    .token.keyword { color: #c678dd !important; }
    .token.string { color: #98c379 !important; }
    .token.function { color: #61afef !important; }
    .token.class-name { color: #e5c07b !important; }
    .token.number { color: #d19a66 !important; }
    .token.operator { color: #56b6c2 !important; }
    .token.punctuation { color: #abb2bf !important; }
    .token.builtin { color: #e5c07b !important; }
    .token.boolean { color: #d19a66 !important; }
    .token.decorator { color: #c678dd !important; }

    /* =================================================================
       INFO BOX
       ================================================================= */
    .info-box {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px 20px;
      margin: 24px 0;
    }

    .info-box strong { display: block; margin-bottom: 8px; }
    .info-box ul { margin: 0; padding-left: 20px; color: var(--text-1); }
    .info-box li { margin: 4px 0; }
    .info-box code { background: var(--bg-2); padding: 2px 6px; border-radius: 4px; font-family: var(--font-mono); font-size: 13px; }
    .info-box a { color: var(--blue); }

    .mini-table { width: 100%; margin-top: 8px; }
    .mini-table td { padding: 4px 0; font-size: 13px; }
    .mini-table td:first-child { color: var(--text-0); }
    .mini-table td:last-child { color: var(--text-2); }
    .mini-table code { background: var(--bg-2); padding: 2px 6px; border-radius: 4px; font-family: var(--font-mono); }

    /* =================================================================
       ARCHITECTURE VISUALIZER
       ================================================================= */
    .arch-viz {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin: 24px 0;
    }

    .arch-tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
      background: var(--bg-2);
    }

    .arch-tab {
      padding: 12px 24px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-1);
      border: none;
      border-bottom: 2px solid transparent;
      background: none;
      cursor: pointer;
      transition: var(--transition);
    }

    .arch-tab:hover { color: var(--text-0); }
    .arch-tab.active {
      color: var(--text-0);
      border-bottom-color: var(--blue);
      background: var(--bg-1);
    }

    .arch-content {
      padding: 40px;
      min-height: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .arch-view { display: none; width: 100%; }
    .arch-view.active { display: flex; flex-direction: column; align-items: center; }

    /* Stack View */
    .stack-container {
      display: flex;
      flex-direction: column;
      gap: 16px;
      width: 100%;
      max-width: 500px;
    }

    .stack-layer {
      background: var(--bg-2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      position: relative;
      transition: var(--transition);
    }

    .stack-layer:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .stack-layer::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 4px;
      border-radius: var(--radius) 0 0 var(--radius);
      opacity: 0.5;
    }

    .stack-layer.blue::before { background: var(--blue); }
    .stack-layer.purple::before { background: var(--purple); }
    .stack-layer.green::before { background: var(--green); }

    .stack-layer:hover::before { opacity: 1; }

    .stack-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .stack-title { font-weight: 600; color: var(--text-0); }
    .stack-pkg { font-family: var(--font-mono); font-size: 12px; color: var(--text-2); }
    .stack-desc { font-size: 14px; color: var(--text-1); }

    .stack-arrow {
      text-align: center;
      color: var(--text-2);
      font-size: 20px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(4px); }
    }

    /* Events View */
    .events-container {
      max-width: 600px;
      width: 100%;
    }

    .events-flow {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .event-step {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: var(--bg-2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
    }

    .event-step-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }

    .event-step-icon.start { background: rgba(59, 130, 246, 0.2); color: var(--blue); }
    .event-step-icon.provider { background: rgba(168, 85, 247, 0.2); color: var(--purple); }
    .event-step-icon.tool { background: rgba(249, 115, 22, 0.2); color: var(--orange); }
    .event-step-icon.end { background: rgba(16, 185, 129, 0.2); color: var(--green); }

    .event-step-content { flex: 1; }
    .event-step-content strong { color: var(--text-0); font-size: 14px; }
    .event-step-content span { display: block; color: var(--text-2); font-size: 13px; }

    .event-step-hook {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--green);
      background: rgba(16, 185, 129, 0.1);
      padding: 4px 8px;
      border-radius: 4px;
    }

    .event-connector {
      text-align: center;
      color: var(--text-2);
      font-size: 16px;
    }

    /* Litmus View */
    .litmus-container {
      text-align: center;
      max-width: 600px;
    }

    .litmus-question {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 40px;
      background: linear-gradient(to right, var(--blue), var(--purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .litmus-choices {
      display: flex;
      gap: 40px;
      justify-content: center;
    }

    .litmus-choice {
      padding: 20px 40px;
      background: var(--bg-2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-0);
    }

    .litmus-choice:hover {
      transform: scale(1.05);
    }

    .litmus-choice.no:hover { border-color: var(--green); }
    .litmus-choice.yes:hover { border-color: var(--purple); }

    .litmus-choice strong { font-size: 24px; display: block; margin-bottom: 8px; }
    .litmus-choice span { color: var(--text-2); }

    .litmus-result {
      margin-top: 40px;
      padding: 20px;
      background: var(--bg-3);
      border-radius: var(--radius);
      animation: fadeUp 0.5s ease;
      display: none;
    }

    .litmus-result.show { display: block; }
    .litmus-result h3 { margin-bottom: 8px; }
    .litmus-result p { margin: 0; color: var(--text-1); }
    .litmus-result.kernel { border-left: 4px solid var(--green); }
    .litmus-result.kernel h3 { color: var(--green); }
    .litmus-result.module { border-left: 4px solid var(--purple); }
    .litmus-result.module h3 { color: var(--purple); }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Concepts Grid */
    .concepts {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin: 24px 0;
    }

    .concept {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      transition: border-color 0.2s ease;
    }

    .concept:hover { border-color: var(--blue); }

    .concept h3 {
      margin: 0 0 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .concept h3::before {
      content: '◆';
      font-size: 10px;
      color: var(--blue);
    }

    .concept p { color: var(--text-1); font-size: 14px; margin-bottom: 12px; }
    .concept ul, .concept ol { padding-left: 18px; color: var(--text-1); font-size: 14px; }
    .concept li { margin: 4px 0; }
    .concept code { background: var(--bg-2); padding: 2px 6px; border-radius: 4px; font-family: var(--font-mono); font-size: 12px; color: var(--blue); }

    .event-tags { display: flex; flex-wrap: wrap; gap: 6px; }
    .event-tags span { background: var(--bg-2); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-family: var(--font-mono); color: var(--green); }

    @media (max-width: 600px) {
      .concepts { grid-template-columns: 1fr; }
    }

    /* =================================================================
       REFERENCE
       ================================================================= */
    .contracts {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin: 24px 0;
    }

    .contract {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px;
    }

    .contract h4 {
      font-size: 14px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .contract h4 span { font-weight: 400; font-size: 12px; color: var(--text-2); }

    .contract code {
      display: block;
      background: var(--bg-2);
      padding: 6px 10px;
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--text-1);
      margin: 4px 0;
    }

    @media (max-width: 600px) {
      .contracts { grid-template-columns: 1fr; }
    }

    .actions {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin: 20px 0;
    }

    .action {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px;
    }

    .action code { font-family: var(--font-mono); font-size: 14px; color: var(--blue); }
    .action span { display: block; font-size: 13px; color: var(--text-2); margin-top: 4px; }

    .event-groups {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin: 24px 0;
    }

    .event-group {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
    }

    .event-group h4 { font-size: 13px; margin-bottom: 10px; color: var(--text-0); }

    .event-group code {
      display: block;
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--green);
      margin: 4px 0;
    }

    @media (max-width: 700px) {
      .event-groups { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 500px) {
      .event-groups { grid-template-columns: 1fr; }
    }

    /* =================================================================
       CLI
       ================================================================= */
    .cli-groups {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin: 24px 0;
    }

    .cli-group {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
    }

    .cli-group h3 { font-size: 14px; margin-bottom: 14px; }

    .cli-item {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
    }

    .cli-item:last-child { border-bottom: none; }

    .cli-item code { font-family: var(--font-mono); font-size: 13px; color: var(--green); }
    .cli-item span { font-size: 13px; color: var(--text-2); }

    @media (max-width: 600px) {
      .cli-groups { grid-template-columns: 1fr; }
    }

    /* =================================================================
       EXAMPLES
       ================================================================= */
    .examples-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .examples-tab {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-1);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition);
    }

    .examples-tab:hover {
      background: var(--bg-2);
      border-color: var(--text-2);
      color: var(--text-0);
    }

    .examples-tab.active {
      background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
      border-color: transparent;
      color: white;
    }

    .examples-content { display: none; }
    .examples-content.active { display: block; }

    .examples-grid {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .example-card {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      transition: all var(--transition);
    }

    .example-card:hover {
      border-color: var(--text-2);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .example-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 18px;
      background: var(--bg-2);
      border-bottom: 1px solid var(--border);
    }

    .example-card-header h3 {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-0);
    }

    .example-card-desc {
      padding: 14px 18px;
      margin: 0;
      font-size: 13px;
      color: var(--text-1);
      line-height: 1.5;
      border-bottom: 1px solid var(--border);
    }

    .example-card pre {
      margin: 0;
      padding: 16px 18px;
      background: var(--bg-0);
      font-size: 12px;
      line-height: 1.6;
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-x: auto;
    }

    .example-card code {
      font-family: var(--font-mono);
    }

    .example-card-output {
      padding: 14px 18px;
      background: var(--bg-2);
      border-top: 1px solid var(--border);
    }

    .output-label {
      display: inline-block;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--green);
      background: rgba(16, 185, 129, 0.1);
      padding: 3px 8px;
      border-radius: 4px;
      margin-bottom: 10px;
    }

    .example-card-output pre {
      margin: 0;
      padding: 0;
      background: transparent;
      font-family: var(--font-mono);
      font-size: 12px;
      line-height: 1.5;
      color: var(--text-1);
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .examples-footer {
      margin-top: 24px;
      padding: 16px 20px;
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 10px;
    }

    .install-hint {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .install-hint strong {
      font-size: 13px;
      color: var(--text-0);
    }

    .install-hint code {
      font-family: var(--font-mono);
      font-size: 13px;
      color: var(--green);
      background: var(--bg-0);
      padding: 8px 14px;
      border-radius: 6px;
      border: 1px solid var(--border);
    }

    /* =================================================================
       CONTRIBUTE
       ================================================================= */
    .callout {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(16, 185, 129, 0.05));
      border: 1px solid var(--blue);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 24px;
    }

    .callout p { margin: 0; color: var(--text-1); }
    .callout strong { color: var(--text-0); }
    .callout em { color: var(--blue); font-style: normal; }

    .contrib-table { width: 100%; border-collapse: collapse; margin: 16px 0; }

    .contrib-table th, .contrib-table td {
      text-align: left;
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
    }

    .contrib-table th {
      background: var(--bg-2);
      color: var(--text-2);
      font-size: 12px;
      text-transform: uppercase;
    }

    .contrib-table .done { color: var(--green); }
    .contrib-table .needed { color: var(--orange); }
    .contrib-table code { background: var(--bg-2); padding: 2px 6px; border-radius: 4px; font-family: var(--font-mono); font-size: 12px; }

    /* Reference tables */
    .ref-table { width: 100%; border-collapse: collapse; margin: 16px 0; }
    .ref-table th, .ref-table td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
    }
    .ref-table th {
      background: var(--bg-2);
      font-weight: 600;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .ref-table code { background: var(--bg-2); padding: 2px 6px; border-radius: 4px; font-family: var(--font-mono); font-size: 12px; }

    /* Inheritance chain */
    .inheritance-chain {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 16px;
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin: 12px 0;
      font-family: var(--font-mono);
      font-size: 13px;
      flex-wrap: wrap;
    }
    .inheritance-chain code {
      background: var(--bg-2);
      padding: 4px 10px;
      border-radius: 4px;
    }

    /* Session lifecycle */
    .lifecycle {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 16px;
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin: 12px 0;
      flex-wrap: wrap;
    }
    .lifecycle-step {
      background: var(--bg-2);
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
    }

    /* Context info */
    .context-info {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 12px 0;
    }
    .context-preserved, .context-reloaded, .context-not {
      padding: 12px 16px;
      border-radius: 6px;
      font-size: 13px;
    }
    .context-preserved { background: rgba(16, 185, 129, 0.1); border-left: 3px solid var(--green); }
    .context-reloaded { background: rgba(59, 130, 246, 0.1); border-left: 3px solid var(--blue); }
    .context-not { background: rgba(249, 115, 22, 0.1); border-left: 3px solid var(--orange); }

    /* Agent flow */
    .agent-flow {
      padding-left: 20px;
      margin: 12px 0;
    }
    .agent-flow li {
      padding: 8px 0;
      font-size: 14px;
      color: var(--text-1);
    }

    /* Ecosystem */
    .ecosystem-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }

    .ecosystem-category {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
    }

    .ecosystem-category h3 {
      margin: 0 0 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .ecosystem-category h3 .count {
      background: var(--bg-2);
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 11px;
      font-weight: 500;
      color: var(--text-2);
    }

    .ecosystem-category > p {
      margin: 0 0 12px;
      font-size: 13px;
      color: var(--text-2);
    }

    .ecosystem-category ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .ecosystem-category li {
      padding: 4px 0;
      font-size: 13px;
      color: var(--text-1);
    }

    .ecosystem-category code {
      background: var(--bg-2);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 12px;
    }

    .collections-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin: 16px 0;
    }

    .collection-item {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 14px;
    }

    .collection-item strong {
      display: block;
      font-size: 14px;
      margin-bottom: 4px;
    }

    .collection-item span {
      font-size: 12px;
      color: var(--text-2);
    }

    a.collection-link {
      text-decoration: none;
      transition: all var(--transition);
    }
    a.collection-link:hover {
      border-color: var(--blue);
      text-decoration: none;
    }
    a.collection-link strong {
      color: var(--blue);
    }

    .personas {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin: 20px 0;
    }

    .persona {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
    }

    .persona strong { display: block; margin-bottom: 6px; }
    .persona p { margin: 0; font-size: 13px; color: var(--text-2); }

    @media (max-width: 700px) {
      .personas { grid-template-columns: 1fr; }
    }

    .task {
      background: var(--bg-1);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      margin: 16px 0;
    }

    .task-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .task-title { font-weight: 600; }

    .task-layer {
      font-size: 12px;
      padding: 4px 10px;
      background: var(--bg-2);
      border-radius: 4px;
      color: var(--text-2);
      font-family: var(--font-mono);
    }

    .task > p { color: var(--text-1); font-size: 14px; margin-bottom: 12px; }

    /* =================================================================
       FOOTER
       ================================================================= */
    .footer {
      border-top: 1px solid var(--border);
      padding: 32px 24px;
      text-align: center;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-bottom: 12px;
    }

    .footer-links a { color: var(--text-2); font-size: 14px; }
    .footer-links a:hover { color: var(--text-0); }

    .footer-copy { color: var(--text-2); font-size: 13px; }

    @media (max-width: 900px) {
      .nav-links { display: none; }
    }
  </style>
</head>
<body>

  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-inner">
      <div class="nav-left">
        <a class="nav-logo" onclick="showSection('home')">
          <img src="amplifierlogo.png" alt="Amplifier">
          Amplifier
        </a>
        <div class="nav-links" id="main-nav">
          <button class="nav-link active" data-section="home">Overview</button>
          <button class="nav-link" data-section="quickstart">Quickstart</button>
          <button class="nav-link" data-section="architecture">Architecture</button>
          <button class="nav-link" data-section="reference">Reference</button>
          <button class="nav-link" data-section="cli">CLI</button>
          <button class="nav-link" data-section="ecosystem">Ecosystem</button>
          <button class="nav-link" data-section="showcase">Showcase</button>
          <button class="nav-link" data-section="examples">Examples</button>
          <button class="nav-link" data-section="contribute">Contribute</button>
        </div>
      </div>
      <div class="nav-right">
        <div class="export-wrap">
          <button class="export-btn" onclick="toggleExportMenu()">
            Export <span class="export-caret" id="export-caret">▼</span>
          </button>
          <div class="export-menu" id="export-menu">
            <button class="export-item" onclick="copyMarkdown()">
              Copy as Markdown
              <span>For agents.md / claude.md</span>
            </button>
            <button class="export-item" onclick="downloadMarkdown()">
              Download amplifier.md
              <span>Agent reference file</span>
            </button>
            <button class="export-item" onclick="downloadFullGuide()">
              Download amplifier-completeguide.md
              <span>Full documentation export</span>
            </button>
          </div>
        </div>
        <a href="https://github.com/microsoft/amplifier-core" class="nav-github" target="_blank">GitHub</a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main>
    <!-- HOME SECTION -->
    <section id="section-home" class="section active">
      <div class="hero">
        <div class="hero-eyebrow">Open Source · Microsoft · MIT License</div>
        <h1 class="hero-title">Amplifier</h1>
        <p class="hero-subtitle">The ultra-thin kernel for modular AI agents</p>
        <p class="hero-description">
          Build AI agent systems with Linux-kernel philosophy: a tiny, stable center (~2,600 lines)
          that provides mechanisms, while policies live as swappable modules at the edges.
        </p>
        <div class="hero-actions">
          <button class="btn-primary" onclick="showSection('quickstart')">Get started</button>
          <a href="https://github.com/microsoft/amplifier-core" class="btn-secondary" target="_blank">View on GitHub</a>
        </div>
      </div>

      <div class="feature-cards">
        <div class="feature-card">
          <div class="feature-gradient blue"></div>
          <span class="feature-label">Use it</span>
          <p>Run AI agents with pre-built providers and tools. Configure via profiles.</p>
        </div>
        <div class="feature-card">
          <div class="feature-gradient purple"></div>
          <span class="feature-label">Extend it</span>
          <p>Write custom tools in 2 minutes. Duck typing, no inheritance.</p>
        </div>
        <div class="feature-card">
          <div class="feature-gradient green"></div>
          <span class="feature-label">Embed it</span>
          <p>Drop the kernel into your app. Full programmatic control.</p>
        </div>
      </div>

      <div class="quickstart-preview">
        <h2>Developer quickstart</h2>
        <p class="section-desc">Make your first agent request in minutes.</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash"># Install
uv tool install --force git+https://github.com/microsoft/amplifier@next

# Update and initialize
amplifier update
amplifier init

# Run
amplifier run "List all Python files in this directory"</code></pre>
        </div>
      </div>

      <div class="start-building">
        <h2>Start building</h2>
        <div class="start-grid">
          <button class="start-item" onclick="showSection('quickstart'); setQuickstartTab('consumer');">
            <div class="start-icon">▶</div>
            <div>
              <strong>Use existing modules</strong>
              <span>Configure profiles and run agents</span>
            </div>
          </button>
          <button class="start-item" onclick="showSection('quickstart'); setQuickstartTab('extender');">
            <div class="start-icon">+</div>
            <div>
              <strong>Write a custom tool</strong>
              <span>Extend agent capabilities</span>
            </div>
          </button>
          <button class="start-item" onclick="showSection('quickstart'); setQuickstartTab('architect');">
            <div class="start-icon">{ }</div>
            <div>
              <strong>Embed in your app</strong>
              <span>Programmatic session control</span>
            </div>
          </button>
          <button class="start-item" onclick="showSection('reference')">
            <div class="start-icon">◈</div>
            <div>
              <strong>Hooks &amp; events</strong>
              <span>Observe and control execution</span>
            </div>
          </button>
        </div>
      </div>
    </section>

    <!-- QUICKSTART SECTION -->
    <section id="section-quickstart" class="section">
      <h1>Quickstart</h1>
      <p class="section-desc">Choose your path. Each guide gets you productive in minutes.</p>

      <div class="tabs" id="quickstart-tabs">
        <button class="tab active" data-tab="consumer">Use a profile</button>
        <button class="tab" data-tab="extender">Write a tool</button>
        <button class="tab" data-tab="architect">Embed in app</button>
      </div>

      <!-- Consumer Tab -->
      <div id="qs-consumer" class="tab-content active">
        <p>Run AI agents using pre-built modules and profiles.</p>

        <h3>1. Install</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash">uv tool install --force git+https://github.com/microsoft/amplifier@next</code></pre>
        </div>

        <h3>2. Update and Initialize</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash">amplifier update
amplifier init</code></pre>
        </div>

        <h3>3. Run</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash"># Interactive
amplifier

# Single command
amplifier run "Explain this codebase"

# With profile
amplifier run --profile dev "Review for security issues"</code></pre>
        </div>

        <h3>4. Customize your profile</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">yaml</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-yaml"># ~/.amplifier/profiles/my-profile.yaml
name: my-profile
session:
  orchestrator: loop-streaming
  context: context-persistent
providers:
  - module: provider-anthropic
    config:
      model: claude-sonnet-4-20250514
tools:
  - module: tool-filesystem
  - module: tool-bash</code></pre>
        </div>

        <h3>Troubleshooting</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash"># Reset profile to defaults
amplifier profile reset

# Clear module cache (fixes stale module issues)
rm -rf ~/.amplifier/module-cache

# Reinstall from scratch
uv tool install --force git+https://github.com/microsoft/amplifier@next
amplifier update</code></pre>
        </div>
      </div>

      <!-- Extender Tab -->
      <div id="qs-extender" class="tab-content">
        <p>Write a custom tool in under 2 minutes using duck typing.</p>

        <h3>1. Implement the Tool protocol</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python">from amplifier_core.models import ToolResult

class WeatherTool:
    @property
    def name(self) -> str:
        return "weather"

    @property
    def description(self) -> str:
        return "Get current weather for a city"

    async def execute(self, input: dict) -> ToolResult:
        city = input.get("city", "Unknown")
        # Your logic here
        return ToolResult(output=f"Weather in {city}: 72°F, Sunny", error=None)</code></pre>
        </div>

        <h3>2. Add mount function</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python">async def mount(coordinator, config):
    await coordinator.mount("tools", WeatherTool(), name="weather")
    return lambda: None  # cleanup</code></pre>
        </div>

        <h3>3. Register entry point</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">toml</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-toml"># pyproject.toml
[project.entry-points."amplifier.modules"]
weather-tool = "my_package.weather:mount"</code></pre>
        </div>

        <h3>4. Install and use</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash">pip install -e .
amplifier run "What's the weather in Seattle?"</code></pre>
        </div>

        <div class="info-box">
          <strong>Tool Protocol</strong>
          <table class="mini-table">
            <tbody>
              <tr><td><code>name</code></td><td>property → str</td></tr>
              <tr><td><code>description</code></td><td>property → str</td></tr>
              <tr><td><code>execute(input)</code></td><td>async → ToolResult</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Architect Tab -->
      <div id="qs-architect" class="tab-content">
        <p>Embed Amplifier in your application with full programmatic control.</p>

        <h3>1. Define mount plan</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python">from amplifier_core import AmplifierSession

async def run_agent(prompt: str) -> str:
    config = {
        "session": {
            "orchestrator": "loop-basic",
            "context": "context-simple"
        },
        "providers": [{"module": "provider-anthropic"}],
        "tools": [{"module": "tool-filesystem"}, {"module": "tool-bash"}],
        "hooks": [{"module": "hooks-logging"}]
    }

    async with AmplifierSession(config) as session:
        return await session.execute(prompt)</code></pre>
        </div>

        <h3>2. Add custom hooks</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python">from amplifier_core.models import HookResult

async def audit_hook(event: str, data: dict) -> HookResult:
    if event == "tool:pre":
        print(f"Executing: {data['tool_name']}")
    return HookResult(action="continue")

config["hooks"].append({"handler": audit_hook, "events": ["tool:*"]})</code></pre>
        </div>

        <h3>3. Session persistence with ID</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python"># Create session with explicit ID for persistence
session = AmplifierSession(config, session_id="user-123-session")
await session.initialize()

# Load conversation history
context = session.coordinator.get("context")
for msg in historical_messages:
    await context.add_message(msg)

# Continue conversation
response = await session.execute(prompt)</code></pre>
        </div>

        <h3>4. Fork sessions for parallel work</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python">async with AmplifierSession(config) as parent:
    child1 = await parent.fork()
    child2 = await parent.fork()

    results = await asyncio.gather(
        child1.execute("Analyze backend"),
        child2.execute("Review frontend")
    )</code></pre>
        </div>

        <div class="info-box">
          <strong>Reference Implementation</strong>
          <p>See <a href="https://github.com/payneio/amplifierd" target="_blank">amplifierd</a> for a complete HTTP/SSE API built on amplifier-core.</p>
        </div>
      </div>
    </section>

    <!-- ARCHITECTURE SECTION -->
    <section id="section-architecture" class="section">
      <h1>Architecture</h1>
      <p class="section-desc">Design philosophy: kernel, not framework. Mechanism over policy.</p>

      <h2>The Linux Kernel Analogy</h2>
      <p>Amplifier mirrors Linux kernel concepts:</p>
      <table class="ref-table">
        <thead>
          <tr><th>Linux Concept</th><th>Amplifier Analog</th><th>Purpose</th></tr>
        </thead>
        <tbody>
          <tr><td>Ring 0 kernel</td><td><code>amplifier-core</code></td><td>Mechanisms only, never policy</td></tr>
          <tr><td>Syscalls</td><td>Session operations</td><td>Few, sharp APIs</td></tr>
          <tr><td>Loadable drivers</td><td>Modules</td><td>Compete at edges</td></tr>
          <tr><td>Signals/Netlink</td><td>Event bus / hooks</td><td>Observe and control</td></tr>
          <tr><td>/proc &amp; dmesg</td><td>JSONL logs</td><td>Single canonical stream</td></tr>
          <tr><td>Capabilities</td><td>Approval system</td><td>Deny-by-default</td></tr>
          <tr><td>Scheduler</td><td>Orchestrator modules</td><td>Swap execution strategies</td></tr>
          <tr><td>VM/Memory</td><td>Context manager</td><td>Conversation memory</td></tr>
        </tbody>
      </table>

      <div class="arch-viz">
        <div class="arch-tabs" id="arch-tabs">
          <button class="arch-tab active" data-view="stack">System Stack</button>
          <button class="arch-tab" data-view="events">Event Flow</button>
          <button class="arch-tab" data-view="litmus">The Litmus Test</button>
        </div>

        <div class="arch-content">
          <!-- Stack View -->
          <div id="arch-stack" class="arch-view active">
            <div class="stack-container">
              <div class="stack-layer blue">
                <div class="stack-header">
                  <span class="stack-title">DX Layer</span>
                  <span class="stack-pkg">amplifier-app-cli</span>
                </div>
                <div class="stack-desc">CLI, scaffolding, dev mode, inspector</div>
              </div>
              <div class="stack-arrow">↓</div>
              <div class="stack-layer purple">
                <div class="stack-header">
                  <span class="stack-title">Helpers</span>
                  <span class="stack-pkg">amplifier-helpers</span>
                </div>
                <div class="stack-desc">@tool decorator, testing utilities</div>
              </div>
              <div class="stack-arrow">↓</div>
              <div class="stack-layer green">
                <div class="stack-header">
                  <span class="stack-title">Kernel</span>
                  <span class="stack-pkg">amplifier-core</span>
                </div>
                <div class="stack-desc">Session, Coordinator, Protocols, Events</div>
              </div>
            </div>
          </div>

          <!-- Events View -->
          <div id="arch-events" class="arch-view">
            <div class="events-container">
              <div class="events-flow">
                <div class="event-step">
                  <div class="event-step-icon start">📥</div>
                  <div class="event-step-content">
                    <strong>Prompt Submitted</strong>
                    <span>User sends a prompt to the session</span>
                  </div>
                  <span class="event-step-hook">session:start</span>
                </div>
                <div class="event-connector">↓</div>
                <div class="event-step">
                  <div class="event-step-icon provider">🤖</div>
                  <div class="event-step-content">
                    <strong>Provider Request</strong>
                    <span>LLM generates response with tool calls</span>
                  </div>
                  <span class="event-step-hook">provider:request</span>
                </div>
                <div class="event-connector">↓</div>
                <div class="event-step">
                  <div class="event-step-icon tool">🔧</div>
                  <div class="event-step-content">
                    <strong>Tool Execution</strong>
                    <span>Tools run with hook observation</span>
                  </div>
                  <span class="event-step-hook">tool:pre → tool:post</span>
                </div>
                <div class="event-connector">↓</div>
                <div class="event-step">
                  <div class="event-step-icon end">✅</div>
                  <div class="event-step-content">
                    <strong>Response Complete</strong>
                    <span>Final answer returned to user</span>
                  </div>
                  <span class="event-step-hook">session:end</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Litmus View -->
          <div id="arch-litmus" class="arch-view">
            <div class="litmus-container">
              <div class="litmus-question">"Could two teams want different behavior?"</div>
              <div class="litmus-choices">
                <button class="litmus-choice no" onclick="showLitmusResult('no')">
                  <strong>No</strong>
                  <span>Universal requirement</span>
                </button>
                <button class="litmus-choice yes" onclick="showLitmusResult('yes')">
                  <strong>Yes</strong>
                  <span>Team preference</span>
                </button>
              </div>
              <div id="litmus-result-no" class="litmus-result kernel">
                <h3>It belongs in the Kernel</h3>
                <p>Mechanisms that everyone needs (e.g., Session management, Event emission).</p>
              </div>
              <div id="litmus-result-yes" class="litmus-result module">
                <h3>It belongs in a Module</h3>
                <p>Policies that vary by team (e.g., "Allow sudo?", "Which LLM to use?").</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <h2>Core concepts</h2>
      <div class="concepts">
        <div class="concept">
          <h3>Coordinator</h3>
          <p>Infrastructure context injected into all modules.</p>
          <ul>
            <li><code>session_id</code> — Unique identifier</li>
            <li><code>config</code> — Session configuration</li>
            <li><code>mount()</code> — Register module</li>
            <li><code>emit()</code> — Fire events</li>
          </ul>
        </div>
        <div class="concept">
          <h3>Mount Plan</h3>
          <p>Configuration specifying which modules to load.</p>
          <div class="code-block" style="margin-top: 8px;">
            <pre style="padding: 12px;"><code class="language-json">{
  "session": {"orchestrator": "loop-basic"},
  "providers": [{"module": "provider-anthropic"}],
  "tools": [{"module": "tool-filesystem"}]
}</code></pre>
          </div>
        </div>
        <div class="concept">
          <h3>Session Lifecycle</h3>
          <ol>
            <li>Load modules from mount plan</li>
            <li>Call <code>mount()</code> on each</li>
            <li>Execute prompts via orchestrator</li>
            <li>Cleanup on session end</li>
          </ol>
        </div>
        <div class="concept">
          <h3>Event System</h3>
          <p>30+ hookable events covering the agent lifecycle.</p>
          <div class="event-tags">
            <span>session:*</span>
            <span>provider:*</span>
            <span>tool:*</span>
            <span>context:*</span>
          </div>
        </div>
      </div>
    </section>

    <!-- REFERENCE SECTION -->
    <section id="section-reference" class="section">
      <h1>API Reference</h1>
      <p class="section-desc">Complete documentation for module developers.</p>

      <div class="tabs" id="reference-tabs">
        <button class="tab active" data-tab="contracts">Contracts</button>
        <button class="tab" data-tab="hooks-api">Hooks API</button>
        <button class="tab" data-tab="events">Events</button>
        <button class="tab" data-tab="profiles">Profiles</button>
        <button class="tab" data-tab="sessions">Sessions</button>
        <button class="tab" data-tab="agents">Agents</button>
      </div>

      <!-- Contracts Tab -->
      <div id="ref-contracts" class="tab-content active">
        <p>All modules use Python Protocols (structural typing). No inheritance required.</p>

        <div class="contracts">
          <div class="contract">
            <h4>Provider <span>LLM Backend</span></h4>
            <code>name: str</code>
            <code>get_info() → ProviderInfo</code>
            <code>list_models() → list[ModelInfo]</code>
            <code>complete(ChatRequest) → ChatResponse</code>
            <code>parse_tool_calls(ChatResponse) → list</code>
          </div>
          <div class="contract">
            <h4>Tool <span>Agent Capability</span></h4>
            <code>name: str</code>
            <code>description: str</code>
            <code>execute(input: dict) → ToolResult</code>
          </div>
          <div class="contract">
            <h4>Orchestrator <span>Execution Loop</span></h4>
            <code>execute(prompt, context, providers, tools, hooks) → str</code>
          </div>
          <div class="contract">
            <h4>ContextManager <span>Memory</span></h4>
            <code>add_message(message)</code>
            <code>get_messages() → list</code>
            <code>should_compact() → bool</code>
            <code>compact()</code>
            <code>clear()</code>
          </div>
          <div class="contract">
            <h4>Hook <span>Observability</span></h4>
            <code>async handler(event: str, data: dict) → HookResult</code>
          </div>
        </div>
      </div>

      <!-- Hooks API Tab -->
      <div id="ref-hooks-api" class="tab-content">
        <p>Hooks observe events and optionally modify behavior via HookResult.</p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python">async def my_hook(event: str, data: dict) -> HookResult:
    if event == "tool:pre" and "rm -rf" in str(data.get("tool_input")):
        return HookResult(action="deny", reason="Blocked")
    return HookResult(action="continue")</code></pre>
        </div>

        <h3>HookResult Actions</h3>
        <div class="actions">
          <div class="action">
            <code>continue</code>
            <span>Proceed normally (default)</span>
          </div>
          <div class="action">
            <code>deny</code>
            <span>Block with reason</span>
          </div>
          <div class="action">
            <code>modify</code>
            <span>Alter event data</span>
          </div>
          <div class="action">
            <code>inject_context</code>
            <span>Add message to context</span>
          </div>
          <div class="action">
            <code>ask_user</code>
            <span>Pause for approval</span>
          </div>
        </div>
      </div>

      <!-- Events Tab -->
      <div id="ref-events" class="tab-content">
        <p>30+ hookable events covering the entire agent lifecycle. Events are logged as JSONL for debugging and observability.</p>

        <h3>Session Lifecycle</h3>
        <table class="ref-table">
          <thead><tr><th>Event</th><th>When</th><th>Data</th></tr></thead>
          <tbody>
            <tr><td><code>session:start</code></td><td>Session initialized</td><td>session_id, mount_plan</td></tr>
            <tr><td><code>session:end</code></td><td>Session cleanup</td><td>session_id, duration</td></tr>
            <tr><td><code>session:fork</code></td><td>Sub-session created</td><td>parent_id, child_id</td></tr>
            <tr><td><code>session:resume</code></td><td>Session resumed</td><td>session_id</td></tr>
          </tbody>
        </table>

        <h3>Prompt Lifecycle</h3>
        <table class="ref-table">
          <thead><tr><th>Event</th><th>When</th><th>Data</th></tr></thead>
          <tbody>
            <tr><td><code>prompt:submit</code></td><td>User prompt received</td><td>prompt, session_id</td></tr>
            <tr><td><code>prompt:complete</code></td><td>Response generated</td><td>response, duration</td></tr>
          </tbody>
        </table>

        <h3>Provider Events</h3>
        <table class="ref-table">
          <thead><tr><th>Event</th><th>When</th><th>Data</th></tr></thead>
          <tbody>
            <tr><td><code>provider:request</code></td><td>Before LLM call</td><td>messages, model</td></tr>
            <tr><td><code>provider:response</code></td><td>After LLM response</td><td>response, usage</td></tr>
            <tr><td><code>provider:error</code></td><td>LLM call failed</td><td>error, model</td></tr>
          </tbody>
        </table>

        <h3>Tool Events</h3>
        <table class="ref-table">
          <thead><tr><th>Event</th><th>When</th><th>Data</th></tr></thead>
          <tbody>
            <tr><td><code>tool:pre</code></td><td>Before tool execution</td><td>tool_name, input</td></tr>
            <tr><td><code>tool:post</code></td><td>After tool execution</td><td>tool_name, result</td></tr>
            <tr><td><code>tool:error</code></td><td>Tool execution failed</td><td>tool_name, error</td></tr>
          </tbody>
        </table>

        <h3>Context Events</h3>
        <table class="ref-table">
          <thead><tr><th>Event</th><th>When</th><th>Data</th></tr></thead>
          <tbody>
            <tr><td><code>context:pre_compact</code></td><td>Before compaction</td><td>message_count, tokens</td></tr>
            <tr><td><code>context:post_compact</code></td><td>After compaction</td><td>message_count, tokens</td></tr>
            <tr><td><code>context:include</code></td><td>Context injected</td><td>source, content</td></tr>
          </tbody>
        </table>

        <h3>Approval &amp; Streaming Events</h3>
        <table class="ref-table">
          <thead><tr><th>Event</th><th>When</th><th>Data</th></tr></thead>
          <tbody>
            <tr><td><code>approval:required</code></td><td>Approval requested</td><td>operation, prompt</td></tr>
            <tr><td><code>approval:granted</code></td><td>User approved</td><td>operation</td></tr>
            <tr><td><code>approval:denied</code></td><td>User denied</td><td>operation, reason</td></tr>
            <tr><td><code>content_block:start</code></td><td>Streaming starts</td><td>block_type</td></tr>
            <tr><td><code>content_block:delta</code></td><td>Content chunk</td><td>delta</td></tr>
            <tr><td><code>content_block:end</code></td><td>Streaming ends</td><td>block_type</td></tr>
          </tbody>
        </table>

        <h3>Event Log Format (JSONL)</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">json</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-json">{
  "ts": "2024-01-15T10:30:00.123Z",
  "session_id": "abc123",
  "event": "tool:pre",
  "component": "orchestrator",
  "module": "tool-bash",
  "data": {"tool_name": "bash", "input": {"command": "ls"}}
}</code></pre>
        </div>

        <h3>Finding Logs</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash"># Session logs location
ls ~/.amplifier/projects/&lt;project&gt;/sessions/&lt;session-id&gt;/events.jsonl

# Search for tool errors
grep '"event":"tool:error"' events.jsonl

# Pretty print with jq
cat events.jsonl | jq 'select(.event == "provider:request")'</code></pre>
        </div>
      </div>

      <!-- Profiles Tab -->
      <div id="ref-profiles" class="tab-content">
        <p>Profiles are pre-configured capability sets defining which modules are accessible during a session.</p>

        <h3>Built-in Profiles</h3>
        <table class="ref-table">
          <thead>
            <tr><th>Profile</th><th>Purpose</th><th>Best For</th></tr>
          </thead>
          <tbody>
            <tr><td><code>foundation</code></td><td>Minimal LLM access only</td><td>Basic chat interactions</td></tr>
            <tr><td><code>base</code></td><td>Filesystem and bash capabilities</td><td>Light development tasks</td></tr>
            <tr><td><code>dev</code></td><td>Complete development tools</td><td>Daily development work</td></tr>
            <tr><td><code>test</code></td><td>Testing-focused configuration</td><td>Running tests, debugging</td></tr>
            <tr><td><code>full</code></td><td>All available features enabled</td><td>Exploring system capabilities</td></tr>
          </tbody>
        </table>

        <h3>Profile Commands</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash">amplifier profile list          # View all profiles
amplifier profile use dev       # Set as default
amplifier profile show dev      # Display configuration
amplifier profile current       # Check active profile
amplifier run --profile dev "..." # Single command usage</code></pre>
        </div>

        <h3>Custom Profile Structure</h3>
        <p>Profiles use markdown with YAML frontmatter. Store in <code>.amplifier/profiles/</code> (project) or <code>~/.amplifier/profiles/</code> (user).</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">yaml</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-yaml">---
name: my-profile
extends: base
description: Custom development profile
session:
  orchestrator: loop-streaming
  context: context-persistent
providers:
  - module: provider-anthropic
    config:
      default_model: claude-opus-4-1
tools:
  - module: tool-filesystem
  - module: tool-bash
    config:
      timeout: 60
hooks:
  - module: hooks-logging
agents:
  code-reviewer:
    description: Expert code reviewer
    tools:
      - tool-filesystem
---

# System Instructions

You are an expert assistant...</code></pre>
        </div>

        <h3>Profile Inheritance</h3>
        <p>Profiles inherit in a linear chain. Each level accumulates capabilities:</p>
        <div class="inheritance-chain">
          <code>foundation</code> → <code>base</code> → <code>dev</code> → <code>custom</code>
        </div>
      </div>

      <!-- Sessions Tab -->
      <div id="ref-sessions" class="tab-content">
        <p>Sessions track conversations, preserving history, tool results, and metadata for resumption.</p>

        <h3>Session Commands</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash"># Starting & Listing
amplifier run "prompt"           # Create new session
amplifier session list           # Display all sessions
amplifier session show [id]      # View session details

# Resuming
amplifier continue "follow-up"   # Resume most recent
amplifier session resume [id]    # Resume specific session
amplifier run --resume [id] "prompt"

# Management
amplifier session delete [id]    # Remove a session
amplifier session cleanup --days 7  # Delete old sessions</code></pre>
        </div>

        <h3>Storage Structure</h3>
        <p>Sessions persist at <code>~/.amplifier/projects/&lt;project-slug&gt;/sessions/&lt;session-id&gt;/</code></p>
        <table class="ref-table">
          <thead>
            <tr><th>File</th><th>Contents</th></tr>
          </thead>
          <tbody>
            <tr><td><code>transcript.jsonl</code></td><td>Conversation history</td></tr>
            <tr><td><code>events.jsonl</code></td><td>Complete event log</td></tr>
            <tr><td><code>metadata.json</code></td><td>Session metadata</td></tr>
          </tbody>
        </table>

        <h3>Session Lifecycle</h3>
        <div class="lifecycle">
          <span class="lifecycle-step">Creation</span> →
          <span class="lifecycle-step">Active</span> →
          <span class="lifecycle-step">Ended</span> →
          <span class="lifecycle-step">Resumption</span>
        </div>

        <h3>Context Preservation</h3>
        <div class="context-info">
          <div class="context-preserved">
            <strong>Preserved:</strong> Conversation history, session ID, project context
          </div>
          <div class="context-reloaded">
            <strong>Reloaded:</strong> Current profile and provider configurations
          </div>
          <div class="context-not">
            <strong>Not preserved:</strong> Tool execution state, in-memory context beyond token limits
          </div>
        </div>
      </div>

      <!-- Agents Tab -->
      <div id="ref-agents" class="tab-content">
        <p>Agents are specialized configurations functioning as sub-sessions for focused tasks.</p>

        <h3>Built-in Agents</h3>
        <table class="ref-table">
          <thead>
            <tr><th>Agent</th><th>Purpose</th></tr>
          </thead>
          <tbody>
            <tr><td><code>explorer</code></td><td>Breadth-first codebase exploration</td></tr>
            <tr><td><code>bug-hunter</code></td><td>Systematic debugging and issue identification</td></tr>
            <tr><td><code>zen-architect</code></td><td>System design emphasizing simplicity</td></tr>
            <tr><td><code>researcher</code></td><td>Research and information synthesis</td></tr>
            <tr><td><code>modular-builder</code></td><td>Code implementation and creation</td></tr>
          </tbody>
        </table>

        <h3>Using Agents</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">bash</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-bash"># Interactive mode - use @ prefix
amplifier> @explorer What is the architecture of this project?
amplifier> @bug-hunter Find issues in the authentication module

# List and show agents
amplifier agents list
amplifier agents show explorer</code></pre>
        </div>

        <h3>How Agents Work</h3>
        <ol class="agent-flow">
          <li>Create sub-session inheriting base settings</li>
          <li>Apply agent-specific tools and instructions</li>
          <li>Execute the request</li>
          <li>Return results to main session</li>
        </ol>

        <h3>Custom Agents</h3>
        <p>Define in profile's <code>agents</code> section or create standalone files in <code>.amplifier/agents/</code></p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">yaml</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-yaml">agents:
  my-agent:
    description: Custom agent for specific task
    tools:
      - tool-filesystem
      - tool-bash
    system: |
      You are an expert at...</code></pre>
        </div>

        <h3>Agent Search Path</h3>
        <p>Agents load from: current profile → <code>.amplifier/agents/</code> (project) → <code>~/.amplifier/agents/</code> (user) → installed collections → bundled agents</p>
      </div>
    </section>

    <!-- CLI SECTION -->
    <section id="section-cli" class="section">
      <h1>CLI Reference</h1>
      <p class="section-desc">Complete reference for all Amplifier command-line commands.</p>

      <h3>Global Options</h3>
      <table class="ref-table">
        <thead><tr><th>Option</th><th>Description</th></tr></thead>
        <tbody>
          <tr><td><code>--version</code></td><td>Show version and exit</td></tr>
          <tr><td><code>--help</code></td><td>Show help and exit</td></tr>
          <tr><td><code>--install-completion</code></td><td>Install shell completion</td></tr>
          <tr><td><code>--show-completion</code></td><td>Show shell completion script</td></tr>
        </tbody>
      </table>

      <div class="cli-groups">
        <div class="cli-group">
          <h3>Running</h3>
          <div class="cli-item"><code>amplifier</code><span>Interactive chat mode</span></div>
          <div class="cli-item"><code>amplifier run "prompt"</code><span>Single command execution</span></div>
          <div class="cli-item"><code>amplifier run --profile name</code><span>Run with specific profile</span></div>
          <div class="cli-item"><code>amplifier run -m model</code><span>Override model</span></div>
          <div class="cli-item"><code>amplifier run --max-tokens N</code><span>Max response tokens</span></div>
          <div class="cli-item"><code>amplifier run --output-format json</code><span>Output format (text/json/json-trace)</span></div>
          <div class="cli-item"><code>amplifier run --no-tools</code><span>Disable tool use</span></div>
          <div class="cli-item"><code>amplifier run --resume [id]</code><span>Resume session by ID</span></div>
          <div class="cli-item"><code>amplifier continue</code><span>Resume last session</span></div>
          <div class="cli-item"><code>amplifier continue "follow-up"</code><span>Resume with new prompt</span></div>
        </div>
        <div class="cli-group">
          <h3>Sessions</h3>
          <div class="cli-item"><code>amplifier session list</code><span>Display all sessions</span></div>
          <div class="cli-item"><code>amplifier session list --all</code><span>Show all sessions</span></div>
          <div class="cli-item"><code>amplifier session show [id]</code><span>View session details</span></div>
          <div class="cli-item"><code>amplifier session resume [id]</code><span>Resume specific session</span></div>
          <div class="cli-item"><code>amplifier session delete [id]</code><span>Remove a session</span></div>
          <div class="cli-item"><code>amplifier session cleanup --days 7</code><span>Delete old sessions</span></div>
        </div>
        <div class="cli-group">
          <h3>Profiles</h3>
          <div class="cli-item"><code>amplifier profile list</code><span>View all profiles</span></div>
          <div class="cli-item"><code>amplifier profile use dev</code><span>Set as default</span></div>
          <div class="cli-item"><code>amplifier profile show name</code><span>Display configuration</span></div>
          <div class="cli-item"><code>amplifier profile show --resolved</code><span>Show full resolved profile</span></div>
          <div class="cli-item"><code>amplifier profile current</code><span>Check active profile</span></div>
          <div class="cli-item"><code>amplifier profile default [name]</code><span>Show/set default profile</span></div>
          <div class="cli-item"><code>amplifier profile reset</code><span>Reset to defaults</span></div>
        </div>
        <div class="cli-group">
          <h3>Providers</h3>
          <div class="cli-item"><code>amplifier provider list</code><span>List available providers</span></div>
          <div class="cli-item"><code>amplifier provider use anthropic</code><span>Set default provider</span></div>
          <div class="cli-item"><code>amplifier provider current</code><span>Show current provider</span></div>
          <div class="cli-item"><code>amplifier provider reset</code><span>Reset to default provider</span></div>
        </div>
        <div class="cli-group">
          <h3>Modules</h3>
          <div class="cli-item"><code>amplifier module list</code><span>Display installed modules</span></div>
          <div class="cli-item"><code>amplifier module list --type tool</code><span>Filter by type</span></div>
          <div class="cli-item"><code>amplifier module show [name]</code><span>View module details</span></div>
          <div class="cli-item"><code>amplifier module add tool-web</code><span>Add a module</span></div>
          <div class="cli-item"><code>amplifier module add --source [url]</code><span>Add from source</span></div>
          <div class="cli-item"><code>amplifier module remove [name]</code><span>Remove a module</span></div>
          <div class="cli-item"><code>amplifier module check-updates</code><span>Check for updates</span></div>
          <div class="cli-item"><code>amplifier module refresh</code><span>Refresh cache</span></div>
        </div>
        <div class="cli-group">
          <h3>Tools</h3>
          <div class="cli-item"><code>amplifier tool list</code><span>List available tools</span></div>
          <div class="cli-item"><code>amplifier tool info [name]</code><span>Show tool details</span></div>
          <div class="cli-item"><code>amplifier tool invoke [name]</code><span>Test tool directly</span></div>
        </div>
        <div class="cli-group">
          <h3>Agents</h3>
          <div class="cli-item"><code>amplifier agents list</code><span>List available agents</span></div>
          <div class="cli-item"><code>amplifier agents show [name]</code><span>View agent details</span></div>
        </div>
        <div class="cli-group">
          <h3>Collections</h3>
          <div class="cli-item"><code>amplifier collection list</code><span>List installed collections</span></div>
          <div class="cli-item"><code>amplifier collection add [url]</code><span>Add from Git</span></div>
          <div class="cli-item"><code>amplifier collection show [name]</code><span>Show collection details</span></div>
          <div class="cli-item"><code>amplifier collection remove [name]</code><span>Remove collection</span></div>
          <div class="cli-item"><code>amplifier collection refresh</code><span>Refresh cache</span></div>
        </div>
        <div class="cli-group">
          <h3>Sources (Dev)</h3>
          <div class="cli-item"><code>amplifier source list</code><span>List source overrides</span></div>
          <div class="cli-item"><code>amplifier source add [name] [path]</code><span>Add local override</span></div>
          <div class="cli-item"><code>amplifier source remove [name]</code><span>Remove override</span></div>
          <div class="cli-item"><code>amplifier source show [name]</code><span>Show source details</span></div>
        </div>
        <div class="cli-group">
          <h3>System</h3>
          <div class="cli-item"><code>amplifier update</code><span>Update Amplifier</span></div>
          <div class="cli-item"><code>amplifier update --cli</code><span>Update CLI only</span></div>
          <div class="cli-item"><code>amplifier update --modules</code><span>Update modules only</span></div>
          <div class="cli-item"><code>amplifier init</code><span>Initialize configuration</span></div>
          <div class="cli-item"><code>amplifier --help</code><span>General help</span></div>
        </div>
      </div>

      <h3>Interactive Commands</h3>
      <p>While in interactive mode, use these slash commands:</p>
      <div class="cli-groups">
        <div class="cli-group">
          <div class="cli-item"><code>/help</code><span>Display available commands</span></div>
          <div class="cli-item"><code>/tools</code><span>List accessible tools</span></div>
          <div class="cli-item"><code>/agents</code><span>List available agents</span></div>
          <div class="cli-item"><code>/status</code><span>Show session information</span></div>
          <div class="cli-item"><code>/think</code><span>Enable planning mode</span></div>
          <div class="cli-item"><code>/clear</code><span>Clear conversation history</span></div>
          <div class="cli-item"><code>/quit</code>, <code>/exit</code><span>Exit the application</span></div>
        </div>
      </div>

      <h3>Using Agents &amp; Mentions</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">bash</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code class="language-bash"># Use agents with @ prefix
amplifier> @explorer Analyze this codebase
amplifier> @bug-hunter Find issues in main.py

# Reference files with @mentions
amplifier> Review @src/main.py for issues
amplifier> @project:context/standards.md Apply these standards
amplifier> @collection:foundation/context/philosophy.md</code></pre>
      </div>

      <h3>Output Formats</h3>
      <p>Use <code>--output-format</code> for automation:</p>
      <table class="ref-table">
        <thead><tr><th>Format</th><th>Description</th></tr></thead>
        <tbody>
          <tr><td><code>text</code></td><td>Human-readable markdown (default)</td></tr>
          <tr><td><code>json</code></td><td>Structured JSON for scripting</td></tr>
          <tr><td><code>json-trace</code></td><td>Complete execution trace with tool calls</td></tr>
        </tbody>
      </table>

      <h3>Environment Variables</h3>
      <table class="ref-table">
        <thead><tr><th>Variable</th><th>Description</th></tr></thead>
        <tbody>
          <tr><td><code>ANTHROPIC_API_KEY</code></td><td>Anthropic API key</td></tr>
          <tr><td><code>OPENAI_API_KEY</code></td><td>OpenAI API key</td></tr>
          <tr><td><code>AZURE_OPENAI_API_KEY</code></td><td>Azure OpenAI API key</td></tr>
          <tr><td><code>AZURE_OPENAI_ENDPOINT</code></td><td>Azure OpenAI endpoint</td></tr>
          <tr><td><code>AMPLIFIER_PROFILE</code></td><td>Default profile</td></tr>
          <tr><td><code>AMPLIFIER_PROVIDER</code></td><td>Default provider</td></tr>
          <tr><td><code>AMPLIFIER_DEBUG</code></td><td>Enable debug logging</td></tr>
        </tbody>
      </table>

      <h3>Configuration Files</h3>
      <table class="ref-table">
        <thead><tr><th>File</th><th>Scope</th><th>Purpose</th></tr></thead>
        <tbody>
          <tr><td><code>~/.amplifier/settings.yaml</code></td><td>User</td><td>Global user settings</td></tr>
          <tr><td><code>.amplifier/settings.yaml</code></td><td>Project</td><td>Project settings (committed)</td></tr>
          <tr><td><code>.amplifier/settings.local.yaml</code></td><td>Local</td><td>Machine-local (gitignored)</td></tr>
        </tbody>
      </table>

      <div class="info-box">
        <strong>Tips</strong>
        <ul>
          <li>Pipe input: <code>cat file.py | amplifier run "Explain"</code></li>
          <li>JSON output for scripting: <code>amplifier run -o json "What is 2+2?"</code></li>
          <li>Verbose output: <code>-v</code> or <code>--verbose</code></li>
          <li>Use agents with @ prefix: <code>@explorer What is the architecture?</code></li>
        </ul>
      </div>
    </section>

    <!-- ECOSYSTEM SECTION -->
    <section id="section-ecosystem" class="section">
      <h1>Ecosystem</h1>
      <p class="section-desc">Available modules, libraries, and collections for extending Amplifier.</p>

      <h2>Runtime Modules</h2>
      <p>Swappable components that implement Amplifier's core contracts.</p>

      <div class="ecosystem-grid">
        <div class="ecosystem-category">
          <h3>🤖 Providers <span class="count">6</span></h3>
          <p>Connect to AI model providers</p>
          <ul>
            <li><a href="https://github.com/microsoft/amplifier-module-provider-anthropic" target="_blank"><code>provider-anthropic</code></a> - Claude models</li>
            <li><a href="https://github.com/microsoft/amplifier-module-provider-openai" target="_blank"><code>provider-openai</code></a> - GPT models</li>
            <li><a href="https://github.com/microsoft/amplifier-module-provider-azure" target="_blank"><code>provider-azure</code></a> - Azure OpenAI</li>
            <li><a href="https://github.com/microsoft/amplifier-module-provider-ollama" target="_blank"><code>provider-ollama</code></a> - Local models</li>
            <li><a href="https://github.com/microsoft/amplifier-module-provider-vllm" target="_blank"><code>provider-vllm</code></a> - vLLM server</li>
            <li><a href="https://github.com/microsoft/amplifier-module-provider-mock" target="_blank"><code>provider-mock</code></a> - Testing</li>
          </ul>
        </div>

        <div class="ecosystem-category">
          <h3>🔧 Tools <span class="count">6</span></h3>
          <p>Extend agent capabilities</p>
          <ul>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-filesystem" target="_blank"><code>tool-filesystem</code></a> - Read/write files</li>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-bash" target="_blank"><code>tool-bash</code></a> - Shell commands</li>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-web" target="_blank"><code>tool-web</code></a> - Web browsing</li>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-search" target="_blank"><code>tool-search</code></a> - Code search</li>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-task" target="_blank"><code>tool-task</code></a> - Task delegation</li>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-todo" target="_blank"><code>tool-todo</code></a> - Todo management</li>
          </ul>
        </div>

        <div class="ecosystem-category">
          <h3>🔄 Orchestrators <span class="count">3</span></h3>
          <p>Control execution loops</p>
          <ul>
            <li><a href="https://github.com/microsoft/amplifier-module-orchestrator-loop-basic" target="_blank"><code>loop-basic</code></a> - Simple request/response</li>
            <li><a href="https://github.com/microsoft/amplifier-module-orchestrator-loop-streaming" target="_blank"><code>loop-streaming</code></a> - Streaming responses</li>
            <li><a href="https://github.com/microsoft/amplifier-module-orchestrator-loop-events" target="_blank"><code>loop-event</code></a> - Event-driven execution</li>
          </ul>
        </div>

        <div class="ecosystem-category">
          <h3>💾 Contexts <span class="count">2</span></h3>
          <p>Manage conversation state</p>
          <ul>
            <li><a href="https://github.com/microsoft/amplifier-module-context-simple" target="_blank"><code>context-simple</code></a> - In-memory storage</li>
            <li><a href="https://github.com/microsoft/amplifier-module-context-persistent" target="_blank"><code>context-persistent</code></a> - Disk persistence</li>
          </ul>
        </div>

        <div class="ecosystem-category">
          <h3>⚡ Hooks <span class="count">9</span></h3>
          <p>Observe and control behavior</p>
          <ul>
            <li><a href="https://github.com/microsoft/amplifier-module-hook-logging" target="_blank"><code>hooks-logging</code></a> - Event logging</li>
            <li><a href="https://github.com/microsoft/amplifier-module-hook-approval" target="_blank"><code>hooks-approval</code></a> - User approval gates</li>
            <li><a href="https://github.com/microsoft/amplifier-module-hook-redaction" target="_blank"><code>hooks-redaction</code></a> - Sensitive data filtering</li>
            <li><code>hooks-backup</code> - Session backup</li>
            <li><code>hooks-streaming-ui</code> - Streaming display</li>
            <li><code>hooks-scheduler</code> - Rate limiting</li>
            <li>+ 3 more...</li>
          </ul>
        </div>
      </div>

      <h2>Libraries</h2>
      <p>Consumed by applications (not runtime modules).</p>

      <table class="ref-table">
        <thead>
          <tr><th>Library</th><th>Purpose</th><th>Repository</th></tr>
        </thead>
        <tbody>
          <tr><td><code>amplifier-profiles</code></td><td>Profile and agent loading with inheritance</td><td><a href="https://github.com/microsoft/amplifier-profiles" target="_blank">GitHub</a></td></tr>
          <tr><td><code>amplifier-collections</code></td><td>Collection discovery and management</td><td><a href="https://github.com/microsoft/amplifier-collections" target="_blank">GitHub</a></td></tr>
          <tr><td><code>amplifier-config</code></td><td>Three-scope configuration management</td><td><a href="https://github.com/microsoft/amplifier-config" target="_blank">GitHub</a></td></tr>
          <tr><td><code>amplifier-module-resolution</code></td><td>Module source resolution</td><td><a href="https://github.com/microsoft/amplifier-module-resolution" target="_blank">GitHub</a></td></tr>
        </tbody>
      </table>

      <h2>Collections</h2>
      <p>Shareable bundles of profiles, agents, and modules.</p>

      <div class="collections-grid">
        <a href="https://github.com/microsoft/amplifier-collection-toolkit" target="_blank" class="collection-item collection-link">
          <strong>Toolkit</strong>
          <span>Essential development tools</span>
        </a>
        <a href="https://github.com/microsoft/amplifier-collection-design-intelligence" target="_blank" class="collection-item collection-link">
          <strong>Design Intelligence</strong>
          <span>Architecture and design agents</span>
        </a>
        <a href="https://github.com/microsoft/amplifier-collection-recipes" target="_blank" class="collection-item collection-link">
          <strong>Recipes</strong>
          <span>Common patterns and workflows</span>
        </a>
        <a href="https://github.com/microsoft/amplifier-collection-issues" target="_blank" class="collection-item collection-link">
          <strong>Issues</strong>
          <span>Issue tracking integration</span>
        </a>
        <a href="https://github.com/momuno/amplifier-collection-convergent-dev" target="_blank" class="collection-item collection-link">
          <strong>Convergent Dev</strong>
          <span>Ideation → sprints → TDD workflow</span>
        </a>
      </div>

      <h3>Community Collections</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">bash</span>
          <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        </div>
        <pre><code class="language-bash"># Install convergent-dev collection
amplifier collection add git+https://github.com/momuno/amplifier-collection-convergent-dev@main

# Activate the profile
amplifier profile use convergent-dev:convergent-dev</code></pre>
      </div>

      <div class="info-box">
        <strong>Module Architecture</strong>
        <ul>
          <li>Runtime modules only depend on <code>amplifier-core</code></li>
          <li>Libraries are consumed by applications, never by modules</li>
          <li>Use <code>amplifier module list</code> to see installed modules</li>
          <li>Use <code>amplifier module show [name]</code> for details</li>
        </ul>
      </div>
    </section>

    <!-- SHOWCASE SECTION -->
    <section id="section-showcase" class="section">
      <h1>Showcase</h1>
      <p class="section-desc">Applications and modules built with Amplifier by the community.</p>

      <div class="callout" style="background: #fee2e2; border-color: #ef4444; border-left: 4px solid #ef4444; margin-bottom: 24px; color: #991b1b;">
        <p style="color: #991b1b; margin: 0;"><strong>⚠️ Security Notice:</strong> Community applications and modules execute arbitrary code with full system access. <strong>Only use from sources you trust.</strong> Review code before installation.</p>
      </div>

      <h2>Community Applications</h2>
      <table class="ref-table">
        <thead>
          <tr><th>Application</th><th>Description</th><th>Author</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-app-transcribe" target="_blank"><code>app-transcribe</code></a></td>
            <td>Transform YouTube videos and audio files into searchable transcripts with AI-powered insights</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-app-blog-creator" target="_blank"><code>app-blog-creator</code></a></td>
            <td>AI-powered blog creation with style-aware generation and rich markdown editor</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-app-voice" target="_blank"><code>app-voice</code></a></td>
            <td>Desktop voice assistant with native speech-to-speech via OpenAI Realtime API</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/samueljklee/amplifier-app-tool-generator" target="_blank"><code>app-tool-generator</code></a></td>
            <td>AI-powered tool generator for creating custom Amplifier tools</td>
            <td>@samueljklee</td>
          </tr>
          <tr>
            <td><a href="https://github.com/DavidKoleczek/amplifier-app-benchmarks" target="_blank"><code>app-benchmarks</code></a></td>
            <td>Benchmarking and evaluation suite for Amplifier</td>
            <td>@DavidKoleczek</td>
          </tr>
        </tbody>
      </table>

      <h2>Community Modules</h2>

      <h3>Providers</h3>
      <table class="ref-table">
        <thead>
          <tr><th>Module</th><th>Description</th><th>Author</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="https://github.com/brycecutt-msft/amplifier-module-provider-bedrock" target="_blank"><code>provider-bedrock</code></a></td>
            <td>AWS Bedrock integration with cross-region inference support for Claude models</td>
            <td>@brycecutt-msft</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-provider-openai-realtime" target="_blank"><code>provider-openai-realtime</code></a></td>
            <td>OpenAI Realtime API for native speech-to-speech with ultra-low latency</td>
            <td>@robotdad</td>
          </tr>
        </tbody>
      </table>

      <h3>Tools</h3>
      <table class="ref-table">
        <thead>
          <tr><th>Module</th><th>Description</th><th>Author</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-tool-mcp" target="_blank"><code>tool-mcp</code></a></td>
            <td>Model Context Protocol integration for MCP servers</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-tool-skills" target="_blank"><code>tool-skills</code></a></td>
            <td>Load domain knowledge with progressive disclosure</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-tool-youtube-dl" target="_blank"><code>tool-youtube-dl</code></a></td>
            <td>Download audio/video from YouTube with metadata extraction</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-tool-whisper" target="_blank"><code>tool-whisper</code></a></td>
            <td>Speech-to-text transcription using OpenAI Whisper</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-image-generation" target="_blank"><code>module-image-generation</code></a></td>
            <td>Multi-provider AI image generation (DALL-E, Imagen, GPT-Image-1)</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-style-extraction" target="_blank"><code>module-style-extraction</code></a></td>
            <td>Extract and apply writing styles from text samples</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-module-markdown-utils" target="_blank"><code>module-markdown-utils</code></a></td>
            <td>Markdown parsing, injection, and metadata utilities</td>
            <td>@robotdad</td>
          </tr>
        </tbody>
      </table>

      <h3>Collections</h3>
      <table class="ref-table">
        <thead>
          <tr><th>Collection</th><th>Description</th><th>Author</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-collection-ddd" target="_blank"><code>collection-ddd</code></a></td>
            <td>Document-Driven Development with 5 specialized workflow agents</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/robotdad/amplifier-collection-spec-kit" target="_blank"><code>collection-spec-kit</code></a></td>
            <td>Specification-Driven Development with 8 agents and constitutional governance</td>
            <td>@robotdad</td>
          </tr>
          <tr>
            <td><a href="https://github.com/momuno/amplifier-collection-convergent-dev" target="_blank"><code>collection-convergent-dev</code></a></td>
            <td>Ideation → sprints → TDD workflow</td>
            <td>@momuno</td>
          </tr>
        </tbody>
      </table>

      <h2>Official Collections</h2>
      <table class="ref-table">
        <thead>
          <tr><th>Collection</th><th>Description</th><th>Repository</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><code>toolkit</code></td>
            <td>Building sophisticated CLI tools using metacognitive recipes</td>
            <td><a href="https://github.com/microsoft/amplifier-collection-toolkit" target="_blank">GitHub</a></td>
          </tr>
          <tr>
            <td><code>design-intelligence</code></td>
            <td>Comprehensive design intelligence with specialized agents</td>
            <td><a href="https://github.com/microsoft/amplifier-collection-design-intelligence" target="_blank">GitHub</a></td>
          </tr>
          <tr>
            <td><code>recipes</code></td>
            <td>Multi-step AI agent orchestration for repeatable workflows</td>
            <td><a href="https://github.com/microsoft/amplifier-collection-recipes" target="_blank">GitHub</a></td>
          </tr>
          <tr>
            <td><code>issues</code></td>
            <td>Issue management workflows</td>
            <td><a href="https://github.com/microsoft/amplifier-collection-issues" target="_blank">GitHub</a></td>
          </tr>
        </tbody>
      </table>

      <h2>Submit Your Project</h2>
      <p>Built something with Amplifier? Share it with the community!</p>
      <ol>
        <li><strong>Build your project</strong> - Follow Amplifier conventions</li>
        <li><strong>Publish to GitHub</strong> - Make code publicly reviewable</li>
        <li><strong>Test thoroughly</strong> - Ensure compatibility with current Amplifier versions</li>
        <li><strong>Submit a PR</strong> - Add to the <a href="https://github.com/microsoft/amplifier/blob/next/docs/MODULES.md" target="_blank">MODULES.md catalog</a></li>
      </ol>
    </section>

    <!-- EXAMPLES SECTION -->
    <section id="section-examples" class="section">
      <h1>Examples</h1>
      <p class="section-desc">Copy-paste patterns for common Amplifier use cases.</p>

      <div class="examples-tabs" id="examples-tabs">
        <button class="examples-tab active" data-tab="hooks">⚡ Hooks</button>
        <button class="examples-tab" data-tab="tools">🔧 Tools</button>
        <button class="examples-tab" data-tab="config">⚙️ Configuration</button>
        <button class="examples-tab" data-tab="recipes">📖 Recipes</button>
      </div>

      <!-- Hooks Examples -->
      <div id="ex-hooks" class="examples-content active">
        <div class="examples-grid">
          <div class="example-card">
            <div class="example-card-header">
              <h3>Approval Gate</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Require user approval before executing sensitive operations like shell commands.</p>
            <pre><code class="language-python">async def approval_gate(event, data) -> HookResult:
    """Pause for user approval on bash commands."""
    if event == "tool:pre" and data["tool_name"] == "bash":
        return HookResult(
            action="ask_user",
            approval_prompt=f"Allow bash: {data['tool_input']}?",
            approval_options=["Allow", "Deny"]
        )
    return HookResult(action="continue")</code></pre>
            <div class="example-card-output">
              <span class="output-label">Usage</span>
              <pre>hooks:
  - handler: approval_gate
    events: ["tool:pre"]</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>Security Guard</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Block dangerous shell commands before they execute. Returns deny action with reason.</p>
            <pre><code class="language-python">from amplifier_core.models import HookResult

async def security_hook(event: str, data: dict) -> HookResult:
    """Block dangerous bash commands."""
    if event == "tool:pre" and data.get("tool_name") == "bash":
        cmd = str(data.get("tool_input", {}))
        dangerous = ["rm -rf", "mkfs", "dd if=", "> /dev/"]

        for pattern in dangerous:
            if pattern in cmd:
                return HookResult(
                    action="deny",
                    reason=f"Blocked dangerous pattern: {pattern}"
                )

    return HookResult(action="continue")</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre>Action: deny
Reason: Blocked dangerous pattern: rm -rf</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>Token Tracker</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Monitor and log token usage across all provider calls for cost tracking.</p>
            <pre><code class="language-python">async def track_tokens(event, data) -> HookResult:
    """Log token usage from provider responses."""
    if event == "provider:response":
        usage = data.get("usage", {})
        tokens = usage.get("total_tokens", 0)
        cost = tokens * 0.00001  # Example pricing
        print(f"Used {tokens} tokens (~\${cost:.4f})")
    return HookResult(action="continue")</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre>Used 1523 tokens (~$0.0152)</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>PII Redaction</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Automatically detect and redact sensitive information from streamed responses.</p>
            <pre><code class="language-python">import re
from amplifier_core.models import HookResult

PATTERNS = {
    "email": r'[\w.-]+@[\w.-]+\.[a-z]{2,}',
    "ssn": r'\d{3}-\d{2}-\d{4}',
    "phone": r'\d{3}[-.\s]?\d{3}[-.\s]?\d{4}'
}

async def redact_pii(event, data) -> HookResult:
    """Redact PII from streaming content."""
    if event == "content_block:delta":
        content = data.get("delta", "")
        for name, pattern in PATTERNS.items():
            content = re.sub(pattern, f"[{name.upper()}_REDACTED]", content)
        return HookResult(action="modify", data={"delta": content})
    return HookResult(action="continue")</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre>Input:  "Contact john@email.com or 555-123-4567"
Output: "Contact [EMAIL_REDACTED] or [PHONE_REDACTED]"</pre>
            </div>
          </div>
        </div>
      </div>

      <!-- Tools Examples -->
      <div id="ex-tools" class="examples-content">
        <div class="examples-grid">
          <div class="example-card">
            <div class="example-card-header">
              <h3>Custom Tool</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Implement a tool using the Protocol pattern - duck typing, no inheritance required.</p>
            <pre><code class="language-python">from amplifier_core.models import ToolResult

class WeatherTool:
    """A simple weather lookup tool."""

    @property
    def name(self) -> str:
        return "weather"

    @property
    def description(self) -> str:
        return "Get current weather for a city"

    async def execute(self, input: dict) -> ToolResult:
        city = input.get("city", "Unknown")
        # Your API call here
        return ToolResult(
            output=f"Weather in {city}: 72°F, Sunny"
        )

# Mount function for module discovery
async def mount(coordinator, config):
    await coordinator.mount("tools", WeatherTool(), name="weather")
    return lambda: None  # cleanup function</code></pre>
            <div class="example-card-output">
              <span class="output-label">pyproject.toml</span>
              <pre>[project.entry-points."amplifier.modules"]
weather-tool = "my_package.weather:mount"</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>ToolResult: Success</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Return successful execution results. The LLM sees this output and can act on it.</p>
            <pre><code class="language-python">from amplifier_core.models import ToolResult

# Simple success
result = ToolResult(output="File created: /tmp/example.txt")

# Structured success with details
result = ToolResult(
    output="""Created: /tmp/report.csv
Rows: 1,523
Size: 45.2 KB
Columns: id, name, email, created_at"""
)</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre>Created: /tmp/report.csv
Rows: 1,523
Size: 45.2 KB</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>ToolResult: Error</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Communicate failures so the LLM can try a different approach or ask for help.</p>
            <pre><code class="language-python">from amplifier_core.models import ToolResult

# Error with clear message
result = ToolResult(
    output="",
    error="Permission denied: /etc/passwd is read-only"
)

# Error with partial output
result = ToolResult(
    output="Processed 50 of 100 files",
    error="Disk full - operation incomplete"
)</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre>Error: Permission denied: /etc/passwd is read-only</pre>
            </div>
          </div>
        </div>
      </div>

      <!-- Config Examples -->
      <div id="ex-config" class="examples-content">
        <div class="examples-grid">
          <div class="example-card">
            <div class="example-card-header">
              <h3>Session Configuration</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">The mount plan structure that configures an Amplifier session with all components.</p>
            <pre><code class="language-python">from amplifier_core import AmplifierSession

config = {
    "session": {
        "orchestrator": "loop-basic",
        "context": "context-simple"
    },
    "providers": [
        {"module": "provider-anthropic"}
    ],
    "tools": [
        {"module": "tool-filesystem"},
        {"module": "tool-bash"}
    ],
    "hooks": [
        {"module": "hooks-logging"},
        {"handler": "my_security_hook"}
    ]
}

async with AmplifierSession(config) as session:
    response = await session.execute("Your prompt here")</code></pre>
            <div class="example-card-output">
              <span class="output-label">CLI Usage</span>
              <pre>amplifier run --profile my_config "Hello!"</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>Multi-Provider Fallback</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Configure provider priority for automatic failover between LLM backends.</p>
            <pre><code class="language-yaml"># profile.yaml - Provider failover chain
providers:
  - module: provider-anthropic
    priority: 1      # Primary - Claude
    config:
      model: claude-sonnet-4-20250514

  - module: provider-openai
    priority: 2      # First fallback - GPT-4
    config:
      model: gpt-4o

  - module: provider-ollama
    priority: 3      # Local fallback
    config:
      model: llama3.1</code></pre>
            <div class="example-card-output">
              <span class="output-label">Behavior</span>
              <pre>1. Try Anthropic (primary)
2. On error → Try OpenAI
3. On error → Try Ollama (local)</pre>
            </div>
          </div>
        </div>
      </div>

      <!-- Recipes Examples -->
      <div id="ex-recipes" class="examples-content">
        <div class="examples-grid">
          <div class="example-card">
            <div class="example-card-header">
              <h3>Chat Agent with Memory</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Build a conversational agent that maintains context across multiple turns.</p>
            <pre><code class="language-python">from amplifier_core import AmplifierSession

async def chat_loop():
    config = {
        "session": {
            "orchestrator": "loop-basic",
            "context": "context-simple"
        },
        "providers": [{"module": "provider-anthropic"}],
        "tools": [{"module": "tool-bash"}, {"module": "tool-filesystem"}]
    }

    async with AmplifierSession(config) as session:
        print("Chat started. Type 'quit' to exit.")
        while True:
            user_input = input("You: ")
            if user_input.lower() == 'quit':
                break

            # Context is automatically maintained
            response = await session.execute(user_input)
            print(f"Agent: {response}")</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre>You: What files are in the current directory?
Agent: I'll check that for you...
[Lists files]
You: Create a summary of the largest one
Agent: Looking at the largest file...</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>Real-time Cost Tracking</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Monitor API costs in real-time with budget alerts and automatic cutoffs.</p>
            <pre><code class="language-python">from amplifier_core.models import HookResult

class CostTracker:
    PRICING = {
        "claude-sonnet-4-20250514": {"input": 0.003, "output": 0.015},
        "gpt-4o": {"input": 0.005, "output": 0.015},
    }

    def __init__(self, budget: float = 10.0):
        self.budget = budget
        self.spent = 0.0

    def track(self, model: str, input_tokens: int, output_tokens: int):
        rates = self.PRICING.get(model, {"input": 0.01, "output": 0.03})
        cost = (input_tokens * rates["input"] +
                output_tokens * rates["output"]) / 1000
        self.spent += cost
        return cost

tracker = CostTracker(budget=5.0)

async def cost_hook(event, data) -> HookResult:
    if event == "provider:response":
        usage = data.get("usage", {})
        cost = tracker.track(
            data.get("model", "unknown"),
            usage.get("input_tokens", 0),
            usage.get("output_tokens", 0)
        )
        print(f"Cost: \${cost:.4f} | Total: \${tracker.spent:.2f}")

        if tracker.spent >= tracker.budget:
            return HookResult(action="deny", reason="Budget exhausted")

    return HookResult(action="continue")</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre>Cost: $0.0234 | Total: $4.89/$5.00
Cost: $0.0156 | Total: $5.05/$5.00
Action: deny - Budget exhausted</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>Complete Audit Trail</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Log every agent action to file for compliance and debugging.</p>
            <pre><code class="language-python">import json
from datetime import datetime
from pathlib import Path
from amplifier_core.models import HookResult

class AuditLogger:
    def __init__(self, log_dir: str = "./logs"):
        self.log_dir = Path(log_dir)
        self.log_dir.mkdir(exist_ok=True)
        self.session_id = datetime.now().strftime("%Y%m%d_%H%M%S")
        self.log_file = self.log_dir / f"session_{self.session_id}.jsonl"

    def log(self, event: str, data: dict):
        entry = {
            "timestamp": datetime.now().isoformat(),
            "event": event,
            "data": {k: str(v)[:500] for k, v in data.items()}
        }
        with open(self.log_file, "a") as f:
            f.write(json.dumps(entry) + "\n")

audit = AuditLogger()

async def audit_hook(event, data) -> HookResult:
    if not event.startswith("content_block:"):
        audit.log(event, data)
    return HookResult(action="continue")</code></pre>
            <div class="example-card-output">
              <span class="output-label">Output</span>
              <pre># Creates: logs/session_20250115_143052.jsonl
{"timestamp": "2025-01-15T14:30:52", "event": "tool:pre", ...}</pre>
            </div>
          </div>

          <div class="example-card">
            <div class="example-card-header">
              <h3>Collection Migration Pattern</h3>
              <button class="copy-btn" onclick="copyExampleCode(this)">Copy</button>
            </div>
            <p class="example-card-desc">Use Amplifier to analyze existing tools/agents and migrate them to a collection structure.</p>
            <pre><code class="language-bash"># Point Amplifier at your project and the official docs
amplifier run "Analyze my project structure in ./my-tools
and compare it to the collection format in
github.com/microsoft/amplifier/docs/MODULES.md

Help me understand:
1. Which of my tools map to Amplifier modules?
2. How should my agents be structured?
3. What goes in profiles vs context?
4. Create a migration plan to collection format."</code></pre>
            <div class="example-card-output">
              <span class="output-label">Result</span>
              <pre>my-collection/
├── agents/           # Agent definitions
│   ├── my-agent.md
│   └── helper-agent.md
├── context/          # Workflow docs
│   └── commands/
├── profiles/         # Configuration
│   └── my-profile.md
└── collection.toml   # Manifest</pre>
            </div>
          </div>
        </div>
      </div>

    </section>

    <!-- CONTRIBUTE SECTION -->
    <section id="section-contribute" class="section">
      <h1>Contributors Guide</h1>
      <p class="section-desc">Help us build a world-class developer experience for Amplifier.</p>

      <div class="tabs" id="contribute-tabs">
        <button class="tab active" data-tab="overview">Overview</button>
        <button class="tab" data-tab="tasks">Priority Tasks</button>
        <button class="tab" data-tab="specs">Specifications</button>
        <button class="tab" data-tab="roadmap">Roadmap</button>
      </div>

      <!-- Overview Tab -->
      <div id="contrib-overview" class="tab-content active">
        <div class="callout">
          <p><strong>North Star:</strong> Amplifier makes advanced AI agent systems <em>feel like scripting</em>. Developers should go from an idea to a working extension in under 2 minutes.</p>
        </div>

        <h3>Understanding the Ecosystem</h3>
        <p>Contributing to Amplifier typically means <strong>creating your own repositories</strong> rather than submitting PRs to a monolithic codebase:</p>
        <ul>
          <li><strong>Core kernel</strong> (<code>amplifier-core</code>) - Small, stable, boring. High bar for changes.</li>
          <li><strong>CLI application</strong> (<code>amplifier-app-cli</code>) - Reference CLI, not user-focused.</li>
          <li><strong>Reference implementations</strong> - Canonical examples for each module type.</li>
          <li><strong>Community ecosystem</strong> - Your own modules, tools, apps, and collections.</li>
        </ul>

        <div class="info-box" style="margin: 16px 0;">
          <strong>Reference Implementations</strong>
          <ul style="margin-top: 8px;">
            <li><a href="https://github.com/microsoft/amplifier-module-provider-anthropic" target="_blank">provider-anthropic</a> - Claude integration</li>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-filesystem" target="_blank">tool-filesystem</a> - File operations</li>
            <li><a href="https://github.com/microsoft/amplifier-module-tool-bash" target="_blank">tool-bash</a> - Shell commands</li>
            <li><a href="https://github.com/payneio/amplifierd" target="_blank">amplifierd</a> - HTTP/SSE API server</li>
          </ul>
        </div>

        <h3>The Gap</h3>
        <p>The kernel is already built. It's stable, minimal, and powerful. What's missing is the <strong>developer experience layer</strong>—the tooling that makes the kernel approachable.</p>

        <h3>What Belongs Where</h3>
        <table class="contrib-table">
          <thead>
            <tr><th>Feature</th><th>Layer</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td>Protocol contracts</td><td>Kernel (core)</td><td class="done">✓ Done</td></tr>
            <tr><td>AmplifierSession</td><td>Kernel (core)</td><td class="done">✓ Done</td></tr>
            <tr><td>Event system (30+ events)</td><td>Kernel (core)</td><td class="done">✓ Done</td></tr>
            <tr><td>Testing utilities (TestCoordinator, etc.)</td><td>Kernel (core)</td><td class="done">✓ Done</td></tr>
            <tr><td>Protocol validation utility</td><td>Kernel (core)</td><td class="needed">Needed</td></tr>
            <tr><td>@tool / @hook decorators</td><td>Helpers</td><td class="needed">Needed</td></tr>
            <tr><td>Test harness utilities</td><td>Helpers</td><td class="needed">Needed</td></tr>
            <tr><td><code>amplifier dev</code> (hot reload)</td><td>CLI</td><td class="needed">Needed</td></tr>
            <tr><td><code>amplifier inspect --events</code></td><td>CLI</td><td class="needed">Needed</td></tr>
            <tr><td><code>amplifier scaffold</code></td><td>CLI</td><td class="needed">Needed</td></tr>
            <tr><td><code>amplifier check</code> (validation)</td><td>CLI</td><td class="needed">Needed</td></tr>
            <tr><td><code>amplifier plan show</code></td><td>CLI</td><td class="needed">Needed</td></tr>
          </tbody>
        </table>

        <h3>Developer Personas</h3>
        <div class="personas">
          <div class="persona">
            <strong>Consumer</strong>
            <p>Uses existing modules. Cares about profiles, CLI, and configuration.</p>
          </div>
          <div class="persona">
            <strong>Extender</strong>
            <p>Adds custom tools/hooks. Needs minimal boilerplate and fast feedback.</p>
          </div>
          <div class="persona">
            <strong>Architect</strong>
            <p>Embeds Amplifier in products. Needs integration patterns and observability.</p>
          </div>
        </div>
      </div>

      <!-- Tasks Tab -->
      <div id="contrib-tasks" class="tab-content">
        <h3>🔴 High Priority</h3>

        <div class="task">
          <div class="task-header">
            <span class="task-title">Testing Utilities ✓</span>
            <span class="task-layer">amplifier-core</span>
          </div>
          <p>Built-in utilities for unit testing modules (AVAILABLE):</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">python</span>
              <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-python">from amplifier_core.testing import (
    TestCoordinator, MockTool, MockContextManager,
    EventRecorder, create_test_coordinator
)

# Usage in tests
async def test_my_tool():
    coord = create_test_coordinator()
    await mount(coord, {})

    tool = coord.mounted["tools"]["my_tool"]
    result = await tool.execute({"input": "test"})
    assert result.error is None</code></pre>
          </div>
        </div>

        <div class="task">
          <div class="task-header">
            <span class="task-title">@tool Decorator</span>
            <span class="task-layer">amplifier-helpers</span>
          </div>
          <p>2-minute time-to-first-tool. Reduces boilerplate dramatically.</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">python</span>
              <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-python"># amplifier_helpers/decorators.py
def tool(name: str, description: str):
    def decorator(func):
        class GeneratedTool:
            @property
            def name(self): return name
            @property
            def description(self): return description
            async def execute(self, input: dict):
                return await func(**input)
        return GeneratedTool()
    return decorator

# Usage
from amplifier_helpers import tool

@tool(name="greet", description="Says hello")
async def greet(name: str) -> str:
    return f"Hello, {name}!"</code></pre>
          </div>
        </div>

        <h3>🟡 Medium Priority</h3>

        <div class="task">
          <div class="task-header">
            <span class="task-title">Event Inspector</span>
            <span class="task-layer">amplifier-app-cli</span>
          </div>
          <p>Real-time visualization of the event stream.</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">bash</span>
              <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-bash">$ amplifier inspect --events

# Output:
# 14:32:01.234 session:start     {session_id: "abc123"}
# 14:32:01.567 prompt:submit     {content: "Hello"}
# 14:32:02.123 provider:request  {provider: "anthropic", messages: 1}
# 14:32:03.456 provider:response {tokens: 42}</code></pre>
          </div>
        </div>

        <div class="task">
          <div class="task-header">
            <span class="task-title">Scaffold Templates</span>
            <span class="task-layer">amplifier-app-cli</span>
          </div>
          <p>Generate module templates with correct structure.</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">bash</span>
              <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-bash">$ amplifier scaffold tool my_tool
# Creates:
# my_tool/
#   __init__.py
#   my_tool.py      # Tool class + mount()
#   pyproject.toml  # Entry point configured
#   tests/
#     test_my_tool.py

$ amplifier scaffold hook --pattern approval
# Generates approval gate hook template</code></pre>
          </div>
        </div>
      </div>

      <!-- Specs Tab -->
      <div id="contrib-specs" class="tab-content">
        <h3>@hook Decorator Specification</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">python</span>
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
          </div>
          <pre><code class="language-python"># amplifier_helpers/decorators.py
from functools import wraps
from amplifier_core.models import HookResult

def hook(events: list[str], priority: int = 100):
    """
    Decorator to create a hook handler.

    Args:
        events: List of event patterns (supports globs like "tool:*")
        priority: Lower runs first (default 100)
    """
    def decorator(func):
        @wraps(func)
        async def wrapper(event: str, data: dict) -> HookResult:
            result = await func(event, data)
            if result is None:
                return HookResult(action="continue")
            return result

        wrapper._hook_events = events
        wrapper._hook_priority = priority
        return wrapper
    return decorator

# Usage
@hook(events=["tool:pre", "tool:post"], priority=10)
async def my_hook(event: str, data: dict):
    print(f"{event}: {data}")
    # Returning None = continue</code></pre>
        </div>

        <h3>Directory Structure</h3>
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">text</span>
          </div>
          <pre><code>amplifier-ecosystem/
├── amplifier-core/           # Kernel (this repo)
│   ├── amplifier_core/
│   │   ├── session.py        # AmplifierSession
│   │   ├── coordinator.py    # Coordinator
│   │   ├── hooks.py          # HookRegistry
│   │   ├── protocols.py      # Protocol definitions
│   │   ├── models.py         # ToolResult, HookResult, etc.
│   │   ├── testing.py        # TestCoordinator, MockTool, etc.
│   │   └── validation.py     # check_protocol() (NEW)
│   └── pyproject.toml
│
├── amplifier-helpers/        # Convenience utilities (NEW)
│   ├── amplifier_helpers/
│   │   ├── decorators.py     # @tool, @hook
│   │   └── testing.py        # ToolTestHarness
│   └── pyproject.toml
│
├── amplifier-app-cli/        # CLI application
│   ├── amplifier_cli/
│   │   ├── commands/
│   │   │   ├── run.py
│   │   │   ├── dev.py        # Hot reload (NEW)
│   │   │   ├── inspect.py    # Event inspector (NEW)
│   │   │   ├── scaffold.py   # Templates (NEW)
│   │   │   ├── check.py      # Validation (NEW)
│   │   │   └── plan.py       # Visualizer (NEW)
│   │   └── main.py
│   └── pyproject.toml
│
└── amplifier-profiles/       # Profile management
    └── ...</code></pre>
        </div>
      </div>

      <!-- Roadmap Tab -->
      <div id="contrib-roadmap" class="tab-content">
        <div class="callout" style="background: #fef3c7; border-color: #f59e0b; border-left: 4px solid #f59e0b; color: #92400e;">
          <p style="color: #92400e; margin: 0;"><strong>⚠️ Guidelines, Not Commitments:</strong> This roadmap is subject to change based on new information, priorities, and discoveries.</p>
        </div>

        <h3>Project Status</h3>
        <p>Amplifier is an <strong>experimental platform</strong> focused on discovering what's possible when AI partnership amplifies human capability. We're building a system that makes AI assistants dramatically more effective.</p>

        <h3>Current Focus Areas</h3>
        <div class="personas">
          <div class="persona">
            <strong>🔧 Building Amplifier with Amplifier</strong>
            <p>Using Amplifier to improve and extend Amplifier. Building new capabilities, improving existing features, and climbing the ladder of metacognitive recipes.</p>
          </div>
          <div class="persona">
            <strong>🌟 Discovering Emergent Value</strong>
            <p>Recognizing and amplifying use-cases that emerge from the system. Surfacing emergent uses, especially those extending beyond code development.</p>
          </div>
        </div>

        <h3>Exploration Directions</h3>
        <table class="ref-table">
          <thead>
            <tr><th>Area</th><th>Description</th></tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Orchestration Strategies</strong></td>
              <td>Specialized orchestrators tailored to specific workflows, optimization goals, or interaction patterns.</td>
            </tr>
            <tr>
              <td><strong>Collections &amp; Workflows</strong></td>
              <td>Collections for new domains, workflows, or ways of organizing reusable knowledge and patterns.</td>
            </tr>
            <tr>
              <td><strong>Metacognitive Recipes</strong></td>
              <td>Structured workflows mixing tasks with higher-level philosophy, decision-making rationale, and problem-solving.</td>
            </tr>
            <tr>
              <td><strong>Context &amp; Memory</strong></td>
              <td>Richer approaches to memory, knowledge synthesis, session learning, and team context sharing.</td>
            </tr>
            <tr>
              <td><strong>Learning from Sessions</strong></td>
              <td>Tools to parse session data, reconstruct logs, and analyze patterns for system improvement.</td>
            </tr>
          </tbody>
        </table>

        <h3>Naming Conventions</h3>
        <p>When creating your own repositories:</p>
        <ul>
          <li><strong>Applications:</strong> <code>amplifier-app-{name}</code></li>
          <li><strong>Modules:</strong> <code>amplifier-module-{type}-{name}</code></li>
          <li><strong>Collections:</strong> <code>amplifier-collection-{name}</code></li>
        </ul>

        <h3>Security Warning</h3>
        <div class="callout" style="background: #fee2e2; border-color: #ef4444; border-left: 4px solid #ef4444; color: #991b1b;">
          <p style="color: #991b1b; margin: 0;"><strong>⚠️ Critical:</strong> Modules and applications execute arbitrary code with full system access. Users must review code before installation. Build with security in mind.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-links">
      <a href="https://github.com/microsoft/amplifier-core" target="_blank">GitHub</a>
      <a href="https://github.com/microsoft/amplifier-core/issues" target="_blank">Issues</a>
      <a href="https://github.com/microsoft/amplifier" target="_blank">Full Amplifier</a>
    </div>
    <p class="footer-copy">© Microsoft Corporation · MIT License</p>
  </footer>

  <!-- Prism.js -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-yaml.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-toml.min.js"></script>

  <script>
    // ==========================================================================
    // NAVIGATION
    // ==========================================================================
    const VALID_SECTIONS = ['home', 'quickstart', 'architecture', 'reference', 'cli', 'ecosystem', 'showcase', 'examples', 'contribute'];

    function showSection(sectionId, updateHash = true) {
      if (!VALID_SECTIONS.includes(sectionId)) sectionId = 'home';

      // Hide all sections
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));

      // Show target section
      const target = document.getElementById('section-' + sectionId);
      if (target) target.classList.add('active');

      // Update nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.toggle('active', link.dataset.section === sectionId);
      });

      // Update URL hash
      if (updateHash && sectionId !== 'home') {
        history.pushState(null, '', '#' + sectionId);
      } else if (updateHash && sectionId === 'home') {
        history.pushState(null, '', window.location.pathname);
      }

      // Re-highlight code
      if (typeof Prism !== 'undefined') Prism.highlightAll();

      // Scroll to top
      window.scrollTo(0, 0);
    }

    // Handle hash changes
    function handleHashChange() {
      const hash = window.location.hash.slice(1) || 'home';
      showSection(hash, false);
    }

    // Nav link clicks
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', () => showSection(link.dataset.section));
    });

    window.addEventListener('hashchange', handleHashChange);
    window.addEventListener('DOMContentLoaded', () => {
      handleHashChange();
      if (typeof Prism !== 'undefined') Prism.highlightAll();
    });

    // ==========================================================================
    // GENERIC TABS
    // ==========================================================================
    function setupTabs(tabsSelector, contentPrefix) {
      const container = document.querySelector(tabsSelector);
      if (!container) return;

      container.querySelectorAll('.tab, .examples-tab, .arch-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          // Update tab buttons
          container.querySelectorAll('.tab, .examples-tab, .arch-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          // Update content
          const tabId = tab.dataset.tab || tab.dataset.view;

          // Hide all content with this prefix in the parent section
          const section = container.closest('.section') || container.closest('.arch-viz');
          section.querySelectorAll('.tab-content, .examples-content, .arch-view').forEach(content => {
            if (content.id.startsWith(contentPrefix)) {
              content.classList.remove('active');
              content.style.display = 'none';
            }
          });

          // Show target content
          const target = document.getElementById(contentPrefix + tabId);
          if (target) {
            target.classList.add('active');
            target.style.display = target.classList.contains('arch-view') ? 'flex' : 'block';
            if (typeof Prism !== 'undefined') Prism.highlightAll();
          }
        });
      });
    }

    // Initialize all tab groups
    setupTabs('#quickstart-tabs', 'qs-');
    setupTabs('#reference-tabs', 'ref-');
    setupTabs('#contribute-tabs', 'contrib-');
    setupTabs('#examples-tabs', 'ex-');
    setupTabs('#arch-tabs', 'arch-');

    // Helper to set quickstart tab from home page
    function setQuickstartTab(tabId) {
      const tab = document.querySelector(`#quickstart-tabs .tab[data-tab="${tabId}"]`);
      if (tab) tab.click();
    }

    // ==========================================================================
    // LITMUS TEST
    // ==========================================================================
    function showLitmusResult(choice) {
      document.getElementById('litmus-result-no').classList.remove('show');
      document.getElementById('litmus-result-yes').classList.remove('show');
      document.getElementById('litmus-result-' + choice).classList.add('show');
    }

    // ==========================================================================
    // COPY CODE
    // ==========================================================================
    function copyCode(button) {
      const codeBlock = button.closest('.code-block');
      const code = codeBlock.querySelector('code').textContent;

      navigator.clipboard.writeText(code).then(() => {
        button.textContent = '✓ Copied';
        button.classList.add('copied');
        setTimeout(() => {
          button.textContent = 'Copy';
          button.classList.remove('copied');
        }, 2000);
      });
    }

    function copyExampleCode(button) {
      const card = button.closest('.example-card');
      const code = card.querySelector('pre code').textContent;

      navigator.clipboard.writeText(code).then(() => {
        button.textContent = '✓ Copied';
        button.classList.add('copied');
        setTimeout(() => {
          button.textContent = 'Copy';
          button.classList.remove('copied');
        }, 2000);
      });
    }

    // ==========================================================================
    // EXPORT MENU
    // ==========================================================================
    function toggleExportMenu() {
      const menu = document.getElementById('export-menu');
      const caret = document.getElementById('export-caret');
      menu.classList.toggle('show');
      caret.classList.toggle('open');
    }

    // Close on outside click
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.export-wrap')) {
        document.getElementById('export-menu').classList.remove('show');
        document.getElementById('export-caret').classList.remove('open');
      }
    });

    // ==========================================================================
    // MARKDOWN EXPORT (AGENTS.MD FORMAT)
    // ==========================================================================
    const MARKDOWN_CONTENT = `# Amplifier AGENTS.md

> Instructions for AI agents working with Amplifier projects

## Project Overview

Amplifier is Microsoft's open-source AI agent orchestration system. It uses Linux-kernel philosophy: a tiny, stable core (~2,600 lines) with swappable modules at the edges.

- **Repository**: https://github.com/microsoft/amplifier
- **License**: MIT
- **Design**: Mechanism over policy

## Dev Environment Setup

\`\`\`bash
# Install Amplifier
uv tool install --force git+https://github.com/microsoft/amplifier@next
amplifier update
amplifier init

# Set API key (required)
export ANTHROPIC_API_KEY="your-key"
# Or: export OPENAI_API_KEY="your-key"
\`\`\`

## Running Commands

\`\`\`bash
# Interactive mode
amplifier

# Single command
amplifier run "Your prompt here"

# With specific profile
amplifier run --profile dev "Your prompt"

# Resume previous session
amplifier continue
\`\`\`

## Working with Profiles

\`\`\`bash
amplifier profile list      # View available
amplifier profile use dev   # Set default
amplifier profile current   # Check active
amplifier profile reset     # Reset to defaults
\`\`\`

Built-in profiles: \`foundation\` (minimal) → \`base\` (fs+bash) → \`dev\` (full tools) → \`test\` → \`full\`

## Working with Sessions

\`\`\`bash
amplifier session list           # View all sessions
amplifier session resume [id]    # Resume specific session
amplifier session cleanup --days 7  # Clean old sessions
\`\`\`

Sessions stored at: \`~/.amplifier/projects/<slug>/sessions/\`

## Using Agents

In interactive mode, use \`@\` prefix:
\`\`\`
@explorer What is the architecture of this project?
@bug-hunter Find issues in the auth module
@zen-architect Design a caching layer
\`\`\`

Available: \`explorer\`, \`bug-hunter\`, \`zen-architect\`, \`researcher\`, \`modular-builder\`

## Interactive Commands

- \`/help\` - Show commands
- \`/tools\` - List available tools
- \`/agents\` - List available agents
- \`/status\` - Session info
- \`/clear\` - Clear history
- \`/quit\` - Exit

## Troubleshooting

\`\`\`bash
# Reset profile
amplifier profile reset

# Clear module cache
rm -rf ~/.amplifier/module-cache

# Full reinstall
uv tool install --force git+https://github.com/microsoft/amplifier@next
amplifier update
\`\`\`

## Creating Custom Tools

\`\`\`python
from amplifier_core.models import ToolResult

class MyTool:
    @property
    def name(self) -> str:
        return "my_tool"

    @property
    def description(self) -> str:
        return "Description for the LLM"

    async def execute(self, input: dict) -> ToolResult:
        # Your logic here
        return ToolResult(success=True, output="Result")
\`\`\`

## Creating Hooks

\`\`\`python
from amplifier_core.models import HookResult

async def my_hook(event: str, data: dict) -> HookResult:
    if event == "tool:pre" and data.get("tool_name") == "bash":
        # Block dangerous commands
        if "rm -rf" in str(data.get("tool_input", {})):
            return HookResult(action="deny", reason="Blocked dangerous command")
    return HookResult(action="continue")
\`\`\`

HookResult actions: \`continue\`, \`deny\`, \`modify\`, \`inject_context\`, \`ask_user\`

## Key Events

- Session: \`session:start\`, \`session:end\`, \`session:error\`
- Provider: \`provider:request\`, \`provider:response\`
- Tool: \`tool:pre\`, \`tool:post\`, \`tool:error\`

## Module Reference

**Providers**: \`provider-anthropic\`, \`provider-openai\`, \`provider-azure\`, \`provider-ollama\`
**Tools**: \`tool-filesystem\`, \`tool-bash\`, \`tool-web\`, \`tool-search\`, \`tool-task\`, \`tool-todo\`
**Orchestrators**: \`loop-basic\`, \`loop-streaming\`, \`loop-event\`
**Contexts**: \`context-simple\`, \`context-persistent\`

---
*Amplifier AGENTS.md - https://github.com/microsoft/amplifier*
`;

    function copyMarkdown() {
      navigator.clipboard.writeText(MARKDOWN_CONTENT).then(() => {
        alert('Markdown copied to clipboard!');
      });
      toggleExportMenu();
    }

    function downloadMarkdown() {
      const blob = new Blob([MARKDOWN_CONTENT], { type: 'text/markdown' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'amplifier.md';
      a.click();
      URL.revokeObjectURL(url);
      toggleExportMenu();
    }

    const FULL_GUIDE_CONTENT = `# Amplifier Complete Guide

> The ultra-thin kernel for modular AI agents

Amplifier is an open-source AI agent orchestration system from Microsoft built on Linux-kernel philosophy: a tiny, stable center (~2,600 lines) that provides mechanisms, while policies live as swappable modules at the edges.

## Quick Reference

- **Repository**: https://github.com/microsoft/amplifier-core
- **License**: MIT
- **Core Size**: ~2,600 lines
- **Design Philosophy**: Mechanism over policy

---

# Installation

\`\`\`bash
uv tool install --force git+https://github.com/microsoft/amplifier@next
amplifier update
amplifier init
\`\`\`

## Troubleshooting

\`\`\`bash
# Reset profile to defaults
amplifier profile reset

# Clear module cache (fixes stale module issues)
rm -rf ~/.amplifier/module-cache

# Reinstall from scratch
uv tool install --force git+https://github.com/microsoft/amplifier@next
amplifier update
\`\`\`

---

# Quickstart Guides

## Path 1: Consumer (Use a Profile)

Run AI agents using pre-built modules and profiles.

### 1. Install
\`\`\`bash
uv tool install --force git+https://github.com/microsoft/amplifier@next
\`\`\`

### 2. Update and Initialize
\`\`\`bash
amplifier update
amplifier init
\`\`\`

### 3. Run
\`\`\`bash
# Interactive
amplifier

# Single command
amplifier run "Explain this codebase"

# With profile
amplifier run --profile dev "Review for security issues"
\`\`\`

### 4. Customize your profile
\`\`\`yaml
# ~/.amplifier/profiles/my-profile.yaml
name: my-profile
session:
  orchestrator: loop-streaming
  context: context-persistent
providers:
  - module: provider-anthropic
    config:
      model: claude-sonnet-4-20250514
tools:
  - module: tool-filesystem
  - module: tool-bash
\`\`\`

---

## Path 2: Extender (Write a Tool)

Write a custom tool in under 2 minutes using duck typing.

### 1. Implement the Tool protocol
\`\`\`python
from amplifier_core.models import ToolResult

class WeatherTool:
    @property
    def name(self) -> str:
        return "weather"

    @property
    def description(self) -> str:
        return "Get current weather for a city"

    async def execute(self, input: dict) -> ToolResult:
        city = input.get("city", "Unknown")
        # Your logic here
        return ToolResult(output=f"Weather in {city}: 72°F, Sunny", error=None)
\`\`\`

### 2. Add mount function
\`\`\`python
async def mount(coordinator, config):
    await coordinator.mount("tools", WeatherTool(), name="weather")
    return lambda: None  # cleanup
\`\`\`

### 3. Register entry point
\`\`\`toml
# pyproject.toml
[project.entry-points."amplifier.modules"]
weather-tool = "my_package.weather:mount"
\`\`\`

### 4. Install and use
\`\`\`bash
pip install -e .
amplifier run "What's the weather in Seattle?"
\`\`\`

**Tool Protocol Summary:**
| Property | Type |
|----------|------|
| \`name\` | property → str |
| \`description\` | property → str |
| \`execute(input)\` | async → ToolResult |

---

## Path 3: Architect (Embed in App)

Embed Amplifier in your application with full programmatic control.

### 1. Define mount plan
\`\`\`python
from amplifier_core import AmplifierSession

async def run_agent(prompt: str) -> str:
    config = {
        "session": {
            "orchestrator": "loop-basic",
            "context": "context-simple"
        },
        "providers": [{"module": "provider-anthropic"}],
        "tools": [{"module": "tool-filesystem"}, {"module": "tool-bash"}],
        "hooks": [{"module": "hooks-logging"}]
    }

    async with AmplifierSession(config) as session:
        return await session.execute(prompt)
\`\`\`

### 2. Add custom hooks
\`\`\`python
from amplifier_core.models import HookResult

async def audit_hook(event: str, data: dict) -> HookResult:
    if event == "tool:pre":
        print(f"Executing: {data['tool_name']}")
    return HookResult(action="continue")

config["hooks"].append({"handler": audit_hook, "events": ["tool:*"]})
\`\`\`

### 3. Session persistence with ID
\`\`\`python
# Create session with explicit ID for persistence
session = AmplifierSession(config, session_id="user-123-session")
await session.initialize()

# Load conversation history
context = session.coordinator.get("context")
for msg in historical_messages:
    await context.add_message(msg)

# Continue conversation
response = await session.execute(prompt)
\`\`\`

### 4. Fork sessions for parallel work
\`\`\`python
async with AmplifierSession(config) as parent:
    child1 = await parent.fork()
    child2 = await parent.fork()

    results = await asyncio.gather(
        child1.execute("Analyze backend"),
        child2.execute("Review frontend")
    )
\`\`\`

**Reference Implementation:** See [amplifierd](https://github.com/payneio/amplifierd) for a complete HTTP/SSE API built on amplifier-core.

---

# Architecture

Design philosophy: kernel, not framework. Mechanism over policy.

## System Stack

\`\`\`
┌─────────────────────────────────────┐
│  DX Layer (amplifier-app-cli)       │
│  CLI, scaffolding, dev mode         │
└───────────────┬─────────────────────┘
                ↓
┌─────────────────────────────────────┐
│  Helpers (amplifier-helpers)        │
│  @tool decorator, testing utilities │
└───────────────┬─────────────────────┘
                ↓
┌─────────────────────────────────────┐
│  Kernel (amplifier-core)            │
│  Session, Coordinator, Protocols    │
└─────────────────────────────────────┘
\`\`\`

## Event Flow

1. **Prompt Submitted** - User sends prompt → \`session:start\`
2. **Provider Request** - LLM generates response → \`provider:request\`
3. **Tool Execution** - Tools run with hooks → \`tool:pre\` → \`tool:post\`
4. **Response Complete** - Final answer returned → \`session:end\`

## The Litmus Test

> "Could two teams want different behavior?"

- **No** → It belongs in the **Kernel** (mechanisms everyone needs)
- **Yes** → It belongs in a **Module** (policies that vary by team)

## Core Concepts

### Coordinator
Infrastructure context injected into all modules.
- \`session_id\` — Unique identifier
- \`config\` — Session configuration
- \`mount()\` — Register module
- \`emit()\` — Fire events

### Mount Plan
Configuration specifying which modules to load.
\`\`\`json
{
  "session": {"orchestrator": "loop-basic"},
  "providers": [{"module": "provider-anthropic"}],
  "tools": [{"module": "tool-filesystem"}]
}
\`\`\`

### Session Lifecycle
1. Load modules from mount plan
2. Call \`mount()\` on each
3. Execute prompts via orchestrator
4. Cleanup on session end

### Event System
30+ hookable events covering the agent lifecycle:
- \`session:*\` - Session events
- \`provider:*\` - Provider events
- \`tool:*\` - Tool events
- \`context:*\` - Context events

---

# CLI Commands

## Running
- \`amplifier\` - Interactive chat mode
- \`amplifier run "prompt"\` - Single command
- \`amplifier run --profile name\` - With specific profile
- \`amplifier run -m model\` - Override model
- \`amplifier continue\` - Resume last session
- \`amplifier continue "follow-up"\` - Resume with new prompt

## Sessions
- \`amplifier session list\` - Display all sessions
- \`amplifier session show [id]\` - View details
- \`amplifier session resume [id]\` - Resume specific
- \`amplifier session delete [id]\` - Remove session
- \`amplifier session cleanup --days 7\` - Delete old sessions

## Profiles
- \`amplifier profile list\` - View all profiles
- \`amplifier profile use dev\` - Set default
- \`amplifier profile show name\` - Display config
- \`amplifier profile current\` - Check active
- \`amplifier profile reset\` - Reset to defaults

## Providers
- \`amplifier provider list\` - List available
- \`amplifier provider use anthropic\` - Set default

## Modules
- \`amplifier module list\` - Display installed
- \`amplifier module show [name]\` - View details
- \`amplifier module add tool-web\` - Add module

## Agents
- \`amplifier agents list\` - List available
- \`amplifier agents show [name]\` - View details
- Use \`@agent-name\` in interactive mode

## Collections
- \`amplifier collection list\` - List installed
- \`amplifier collection add [url]\` - Add from Git

## System
- \`amplifier update\` - Update Amplifier
- \`amplifier init\` - Initialize configuration
- \`amplifier --help\` - General help

## Interactive Commands
- \`/help\` - Display commands
- \`/tools\` - List tools
- \`/agents\` - List agents
- \`/status\` - Session info
- \`/clear\` - Clear history
- \`/quit\` - Exit

## Tips
- Pipe input: \`cat file.py | amplifier run "Explain"\`
- Set default profile: \`AMPLIFIER_PROFILE=dev\`
- Verbose output: \`-v\` or \`--verbose\`
- Use agents with @ prefix: \`@explorer What is the architecture?\`

---

# API Reference

## Protocols (Contracts)

All modules use Python Protocols (structural typing). No inheritance required.

### Provider (LLM Backend)
\`\`\`python
name: str
get_info() → ProviderInfo
list_models() → list[ModelInfo]
complete(ChatRequest) → ChatResponse
parse_tool_calls(ChatResponse) → list
\`\`\`

### Tool (Agent Capability)
\`\`\`python
name: str
description: str
execute(input: dict) → ToolResult
\`\`\`

### Orchestrator (Execution Loop)
\`\`\`python
execute(prompt, context, providers, tools, hooks) → str
\`\`\`

### ContextManager (Memory)
\`\`\`python
add_message(message)
get_messages() → list
should_compact() → bool
compact()
clear()
\`\`\`

### Hook (Observability)
\`\`\`python
async handler(event: str, data: dict) → HookResult
\`\`\`

---

## Hooks API

Hooks observe events and optionally modify behavior via HookResult.

\`\`\`python
async def my_hook(event: str, data: dict) -> HookResult:
    if event == "tool:pre" and "rm -rf" in str(data.get("tool_input")):
        return HookResult(action="deny", reason="Blocked")
    return HookResult(action="continue")
\`\`\`

### HookResult Actions

| Action | Description |
|--------|-------------|
| \`continue\` | Proceed normally (default) |
| \`deny\` | Block operation with reason |
| \`modify\` | Alter event data |
| \`inject_context\` | Add message to context |
| \`ask_user\` | Pause for approval |

---

## Hookable Events

### Session
\`session:start\`, \`session:end\`, \`session:fork\`

### Provider
\`provider:request\`, \`provider:response\`, \`provider:error\`

### Tool
\`tool:pre\`, \`tool:post\`, \`tool:error\`

### Streaming
\`content_block:start\`, \`content_block:delta\`, \`content_block:end\`

### Context
\`context:pre_compact\`, \`context:post_compact\`

### Governance
\`approval:required\`, \`approval:granted\`, \`policy:violation\`

---

# Profiles

Profiles are pre-configured capability sets defining which modules are accessible during a session.

## Built-in Profiles

| Profile | Purpose | Best For |
|---------|---------|----------|
| \`foundation\` | Minimal LLM access only | Basic chat |
| \`base\` | Filesystem and bash | Light dev tasks |
| \`dev\` | Complete development tools | Daily dev work |
| \`test\` | Testing-focused | Running tests |
| \`full\` | All features enabled | Exploration |

## Profile Inheritance

\`foundation\` → \`base\` → \`dev\` → \`custom\`

## Custom Profile Structure

Profiles use markdown with YAML frontmatter. Store in \`.amplifier/profiles/\` (project) or \`~/.amplifier/profiles/\` (user).

\`\`\`yaml
---
name: my-profile
extends: base
description: Custom development profile
session:
  orchestrator: loop-streaming
  context: context-persistent
providers:
  - module: provider-anthropic
    config:
      default_model: claude-opus-4-1
tools:
  - module: tool-filesystem
  - module: tool-bash
    config:
      timeout: 60
hooks:
  - module: hooks-logging
agents:
  code-reviewer:
    description: Expert code reviewer
    tools:
      - tool-filesystem
---

# System Instructions

You are an expert assistant...
\`\`\`

---

# Sessions

Sessions track conversations, preserving history, tool results, and metadata.

## Session Commands

\`\`\`bash
# Starting & Listing
amplifier run "prompt"           # Create new session
amplifier session list           # Display all sessions
amplifier session show [id]      # View session details

# Resuming
amplifier continue "follow-up"   # Resume most recent
amplifier session resume [id]    # Resume specific session
amplifier run --resume [id] "prompt"

# Management
amplifier session delete [id]    # Remove a session
amplifier session cleanup --days 7  # Delete old sessions
\`\`\`

## Storage Structure

Sessions persist at \`~/.amplifier/projects/<project-slug>/sessions/<session-id>/\`

| File | Contents |
|------|----------|
| \`transcript.jsonl\` | Conversation history |
| \`events.jsonl\` | Complete event log |
| \`metadata.json\` | Session metadata |

## Session Lifecycle

Creation → Active → Ended → Resumption

## Context Preservation

- **Preserved**: Conversation history, session ID, project context
- **Reloaded**: Current profile and provider configurations
- **Not preserved**: Tool execution state, in-memory context beyond token limits

---

# Agents

Agents are specialized configurations functioning as sub-sessions for focused tasks.

## Built-in Agents

| Agent | Purpose |
|-------|---------|
| \`explorer\` | Breadth-first codebase exploration |
| \`bug-hunter\` | Systematic debugging and issue identification |
| \`zen-architect\` | System design emphasizing simplicity |
| \`researcher\` | Research and information synthesis |
| \`modular-builder\` | Code implementation and creation |

## Using Agents

\`\`\`bash
# Interactive mode - use @ prefix
amplifier> @explorer What is the architecture of this project?
amplifier> @bug-hunter Find issues in the authentication module

# List and show agents
amplifier agents list
amplifier agents show explorer
\`\`\`

## How Agents Work

1. Create sub-session inheriting base settings
2. Apply agent-specific tools and instructions
3. Execute the request
4. Return results to main session

## Custom Agents

Define in profile's \`agents\` section or create standalone files in \`.amplifier/agents/\`

\`\`\`yaml
agents:
  my-agent:
    description: Custom agent for specific task
    tools:
      - tool-filesystem
      - tool-bash
    system: |
      You are an expert at...
\`\`\`

## Agent Search Path

current profile → \`.amplifier/agents/\` (project) → \`~/.amplifier/agents/\` (user) → installed collections → bundled agents

---

# Ecosystem

## Runtime Modules

### Providers (6)
| Module | Purpose |
|--------|---------|
| \`provider-anthropic\` | Claude models |
| \`provider-openai\` | GPT models |
| \`provider-azure\` | Azure OpenAI |
| \`provider-ollama\` | Local models |
| \`provider-vllm\` | vLLM server |
| \`provider-mock\` | Testing |

### Tools (6)
| Module | Purpose |
|--------|---------|
| \`tool-filesystem\` | Read/write files |
| \`tool-bash\` | Shell commands |
| \`tool-web\` | Web browsing |
| \`tool-search\` | Code search |
| \`tool-task\` | Task delegation |
| \`tool-todo\` | Todo management |

### Orchestrators (3)
| Module | Purpose |
|--------|---------|
| \`loop-basic\` | Simple request/response |
| \`loop-streaming\` | Streaming responses |
| \`loop-event\` | Event-driven execution |

### Contexts (2)
| Module | Purpose |
|--------|---------|
| \`context-simple\` | In-memory storage |
| \`context-persistent\` | Disk persistence |

### Hooks (9)
\`hooks-logging\`, \`hooks-approval\`, \`hooks-redaction\`, \`hooks-backup\`, \`hooks-streaming-ui\`, \`hooks-scheduler\`, and more

## Libraries

| Library | Purpose |
|---------|---------|
| \`amplifier-profiles\` | Profile and agent loading with inheritance |
| \`amplifier-collections\` | Collection discovery and management |
| \`amplifier-config\` | Three-scope configuration management |
| \`amplifier-module-resolution\` | Module source resolution |

## Collections

Shareable bundles of profiles, agents, and modules.

- **Toolkit** - Essential development tools
- **Design Intelligence** - Architecture and design agents
- **Recipes** - Common patterns and workflows
- **Issues** - Issue tracking integration
- **Convergent Dev** - Ideation → sprints → TDD workflow (https://github.com/momuno/amplifier-collection-convergent-dev)

### Installing Collections

\`\`\`bash
# Install convergent-dev collection
amplifier collection add git+https://github.com/momuno/amplifier-collection-convergent-dev@main

# Activate the profile
amplifier profile use convergent-dev:convergent-dev
\`\`\`

---

# Examples

## Hooks

### Approval Gate
Require user approval before executing sensitive operations like shell commands.

\`\`\`python
async def approval_gate(event, data) -> HookResult:
    """Pause for user approval on bash commands."""
    if event == "tool:pre" and data["tool_name"] == "bash":
        return HookResult(
            action="ask_user",
            approval_prompt=f"Allow bash: {data['tool_input']}?",
            approval_options=["Allow", "Deny"]
        )
    return HookResult(action="continue")
\`\`\`

### Security Guard
Block dangerous shell commands before they execute.

\`\`\`python
from amplifier_core.models import HookResult

async def security_hook(event: str, data: dict) -> HookResult:
    """Block dangerous bash commands."""
    if event == "tool:pre" and data.get("tool_name") == "bash":
        cmd = str(data.get("tool_input", {}))
        dangerous = ["rm -rf", "mkfs", "dd if=", "> /dev/"]

        for pattern in dangerous:
            if pattern in cmd:
                return HookResult(
                    action="deny",
                    reason=f"Blocked dangerous pattern: {pattern}"
                )

    return HookResult(action="continue")
\`\`\`

### Token Tracker
Monitor and log token usage across all provider calls for cost tracking.

\`\`\`python
async def track_tokens(event, data) -> HookResult:
    """Log token usage from provider responses."""
    if event == "provider:response":
        usage = data.get("usage", {})
        tokens = usage.get("total_tokens", 0)
        cost = tokens * 0.00001  # Example pricing
        print(f"Used {tokens} tokens (~\${cost:.4f})")
    return HookResult(action="continue")
\`\`\`

### PII Redaction
Automatically detect and redact sensitive information from streamed responses.

\`\`\`python
import re
from amplifier_core.models import HookResult

PATTERNS = {
    "email": r'[\\w.-]+@[\\w.-]+\\.[a-z]{2,}',
    "ssn": r'\\d{3}-\\d{2}-\\d{4}',
    "phone": r'\\d{3}[-.\\s]?\\d{3}[-.\\s]?\\d{4}'
}

async def redact_pii(event, data) -> HookResult:
    """Redact PII from streaming content."""
    if event == "content_block:delta":
        content = data.get("delta", "")
        for name, pattern in PATTERNS.items():
            content = re.sub(pattern, f"[{name.upper()}_REDACTED]", content)
        return HookResult(action="modify", data={"delta": content})
    return HookResult(action="continue")
\`\`\`

---

## Tools

### Custom Tool
Implement a tool using the Protocol pattern - duck typing, no inheritance required.

\`\`\`python
from amplifier_core.models import ToolResult

class WeatherTool:
    """A simple weather lookup tool."""

    @property
    def name(self) -> str:
        return "weather"

    @property
    def description(self) -> str:
        return "Get current weather for a city"

    async def execute(self, input: dict) -> ToolResult:
        city = input.get("city", "Unknown")
        # Your API call here
        return ToolResult(
            output=f"Weather in {city}: 72°F, Sunny"
        )

# Mount function for module discovery
async def mount(coordinator, config):
    await coordinator.mount("tools", WeatherTool(), name="weather")
    return lambda: None  # cleanup function
\`\`\`

**pyproject.toml:**
\`\`\`toml
[project.entry-points."amplifier.modules"]
weather-tool = "my_package.weather:mount"
\`\`\`

### ToolResult: Success
\`\`\`python
from amplifier_core.models import ToolResult

# Simple success
result = ToolResult(output="File created: /tmp/example.txt")

# Structured success with details
result = ToolResult(
    output="""Created: /tmp/report.csv
Rows: 1,523
Size: 45.2 KB
Columns: id, name, email, created_at"""
)
\`\`\`

### ToolResult: Error
\`\`\`python
from amplifier_core.models import ToolResult

# Error with clear message
result = ToolResult(
    output="",
    error="Permission denied: /etc/passwd is read-only"
)

# Error with partial output
result = ToolResult(
    output="Processed 50 of 100 files",
    error="Disk full - operation incomplete"
)
\`\`\`

---

## Configuration

### Session Configuration
\`\`\`python
from amplifier_core import AmplifierSession

config = {
    "session": {
        "orchestrator": "loop-basic",
        "context": "context-simple"
    },
    "providers": [
        {"module": "provider-anthropic"}
    ],
    "tools": [
        {"module": "tool-filesystem"},
        {"module": "tool-bash"}
    ],
    "hooks": [
        {"module": "hooks-logging"},
        {"handler": "my_security_hook"}
    ]
}

async with AmplifierSession(config) as session:
    response = await session.execute("Your prompt here")
\`\`\`

### Multi-Provider Fallback
Configure provider priority for automatic failover between LLM backends.

\`\`\`yaml
# profile.yaml - Provider failover chain
providers:
  - module: provider-anthropic
    priority: 1      # Primary - Claude
    config:
      model: claude-sonnet-4-20250514

  - module: provider-openai
    priority: 2      # First fallback - GPT-4
    config:
      model: gpt-4o

  - module: provider-ollama
    priority: 3      # Local fallback
    config:
      model: llama3.1
\`\`\`

---

## Recipes

### Chat Agent with Memory
Build a conversational agent that maintains context across multiple turns.

\`\`\`python
from amplifier_core import AmplifierSession

async def chat_loop():
    config = {
        "session": {
            "orchestrator": "loop-basic",
            "context": "context-simple"
        },
        "providers": [{"module": "provider-anthropic"}],
        "tools": [{"module": "tool-bash"}, {"module": "tool-filesystem"}]
    }

    async with AmplifierSession(config) as session:
        print("Chat started. Type 'quit' to exit.")
        while True:
            user_input = input("You: ")
            if user_input.lower() == 'quit':
                break

            # Context is automatically maintained
            response = await session.execute(user_input)
            print(f"Agent: {response}")
\`\`\`

### Real-time Cost Tracking
Monitor API costs in real-time with budget alerts and automatic cutoffs.

\`\`\`python
from amplifier_core.models import HookResult

class CostTracker:
    PRICING = {
        "claude-sonnet-4-20250514": {"input": 0.003, "output": 0.015},
        "gpt-4o": {"input": 0.005, "output": 0.015},
    }

    def __init__(self, budget: float = 10.0):
        self.budget = budget
        self.spent = 0.0

    def track(self, model: str, input_tokens: int, output_tokens: int):
        rates = self.PRICING.get(model, {"input": 0.01, "output": 0.03})
        cost = (input_tokens * rates["input"] +
                output_tokens * rates["output"]) / 1000
        self.spent += cost
        return cost

tracker = CostTracker(budget=5.0)

async def cost_hook(event, data) -> HookResult:
    if event == "provider:response":
        usage = data.get("usage", {})
        cost = tracker.track(
            data.get("model", "unknown"),
            usage.get("input_tokens", 0),
            usage.get("output_tokens", 0)
        )
        print(f"Cost: \${cost:.4f} | Total: \${tracker.spent:.2f}")

        if tracker.spent >= tracker.budget:
            return HookResult(action="deny", reason="Budget exhausted")

    return HookResult(action="continue")
\`\`\`

### Complete Audit Trail
Log every agent action to file for compliance and debugging.

\`\`\`python
import json
from datetime import datetime
from pathlib import Path
from amplifier_core.models import HookResult

class AuditLogger:
    def __init__(self, log_dir: str = "./logs"):
        self.log_dir = Path(log_dir)
        self.log_dir.mkdir(exist_ok=True)
        self.session_id = datetime.now().strftime("%Y%m%d_%H%M%S")
        self.log_file = self.log_dir / f"session_{self.session_id}.jsonl"

    def log(self, event: str, data: dict):
        entry = {
            "timestamp": datetime.now().isoformat(),
            "event": event,
            "data": {k: str(v)[:500] for k, v in data.items()}
        }
        with open(self.log_file, "a") as f:
            f.write(json.dumps(entry) + "\\n")

audit = AuditLogger()

async def audit_hook(event, data) -> HookResult:
    if not event.startswith("content_block:"):
        audit.log(event, data)
    return HookResult(action="continue")
\`\`\`

### Collection Migration Pattern
Use Amplifier to analyze existing tools/agents and migrate them to a collection structure.

\`\`\`bash
# Point Amplifier at your project and the official docs
amplifier run "Analyze my project structure in ./my-tools
and compare it to the collection format in
github.com/microsoft/amplifier/docs/MODULES.md

Help me understand:
1. Which of my tools map to Amplifier modules?
2. How should my agents be structured?
3. What goes in profiles vs context?
4. Create a migration plan to collection format."
\`\`\`

**Result structure:**
\`\`\`
my-collection/
├── agents/           # Agent definitions
│   ├── my-agent.md
│   └── helper-agent.md
├── context/          # Workflow docs
│   └── commands/
├── profiles/         # Configuration
│   └── my-profile.md
└── collection.toml   # Manifest
\`\`\`

---

# Contributors Guide

Help us build a world-class developer experience for Amplifier.

**North Star:** Amplifier makes advanced AI agent systems *feel like scripting*. Developers should go from an idea to a working extension in under 2 minutes.

## The Gap

The kernel is already built. It's stable, minimal, and powerful. What's missing is the **developer experience layer**—the tooling that makes the kernel approachable.

## What Belongs Where

| Feature | Layer | Status |
|---------|-------|--------|
| Protocol contracts | Kernel (core) | ✓ Done |
| AmplifierSession | Kernel (core) | ✓ Done |
| Event system (30+ events) | Kernel (core) | ✓ Done |
| Testing utilities (TestCoordinator, etc.) | Kernel (core) | ✓ Done |
| Protocol validation utility | Kernel (core) | Needed |
| @tool / @hook decorators | Helpers | Needed |
| Test harness utilities | Helpers | Needed |
| \`amplifier dev\` (hot reload) | CLI | Needed |
| \`amplifier inspect --events\` | CLI | Needed |
| \`amplifier scaffold\` | CLI | Needed |
| \`amplifier check\` (validation) | CLI | Needed |
| \`amplifier plan show\` | CLI | Needed |

## Developer Personas

- **Consumer**: Uses existing modules. Cares about profiles, CLI, and configuration.
- **Extender**: Adds custom tools/hooks. Needs minimal boilerplate and fast feedback.
- **Architect**: Embeds Amplifier in products. Needs integration patterns and observability.

## Priority Tasks

### High Priority

**Testing Utilities** (amplifier-core) - Built-in utilities for unit testing modules:

\`\`\`python
from amplifier_core.testing import (
    TestCoordinator, MockTool, MockContextManager,
    EventRecorder, create_test_coordinator
)

# Usage in tests
async def test_my_tool():
    coord = create_test_coordinator()
    await mount(coord, {})

    tool = coord.mounted["tools"]["my_tool"]
    result = await tool.execute({"input": "test"})
    assert result.error is None
\`\`\`

**@tool Decorator** (amplifier-helpers) - 2-minute time-to-first-tool:

\`\`\`python
# amplifier_helpers/decorators.py
def tool(name: str, description: str):
    def decorator(func):
        class GeneratedTool:
            @property
            def name(self): return name
            @property
            def description(self): return description
            async def execute(self, input: dict):
                return await func(**input)
        return GeneratedTool()
    return decorator

# Usage
from amplifier_helpers import tool

@tool(name="greet", description="Says hello")
async def greet(name: str) -> str:
    return f"Hello, {name}!"
\`\`\`

### Medium Priority

**Event Inspector** (amplifier-app-cli) - Real-time visualization:

\`\`\`bash
$ amplifier inspect --events

# Output:
# 14:32:01.234 session:start     {session_id: "abc123"}
# 14:32:01.567 prompt:submit     {content: "Hello"}
# 14:32:02.123 provider:request  {provider: "anthropic", messages: 1}
# 14:32:03.456 provider:response {tokens: 42}
\`\`\`

**Scaffold Templates** (amplifier-app-cli) - Generate module templates:

\`\`\`bash
$ amplifier scaffold tool my_tool
# Creates:
# my_tool/
#   __init__.py
#   my_tool.py      # Tool class + mount()
#   pyproject.toml  # Entry point configured
#   tests/
#     test_my_tool.py

$ amplifier scaffold hook --pattern approval
# Generates approval gate hook template
\`\`\`

## Specifications

### @hook Decorator

\`\`\`python
# amplifier_helpers/decorators.py
from functools import wraps
from amplifier_core.models import HookResult

def hook(events: list[str], priority: int = 100):
    """
    Decorator to create a hook handler.

    Args:
        events: List of event patterns (supports globs like "tool:*")
        priority: Lower runs first (default 100)
    """
    def decorator(func):
        @wraps(func)
        async def wrapper(event: str, data: dict) -> HookResult:
            result = await func(event, data)
            if result is None:
                return HookResult(action="continue")
            return result

        wrapper._hook_events = events
        wrapper._hook_priority = priority
        return wrapper
    return decorator

# Usage
@hook(events=["tool:pre", "tool:post"], priority=10)
async def my_hook(event: str, data: dict):
    print(f"{event}: {data}")
    # Returning None = continue
\`\`\`

### Directory Structure

\`\`\`
amplifier-ecosystem/
├── amplifier-core/           # Kernel (this repo)
│   ├── amplifier_core/
│   │   ├── session.py        # AmplifierSession
│   │   ├── coordinator.py    # Coordinator
│   │   ├── hooks.py          # HookRegistry
│   │   ├── protocols.py      # Protocol definitions
│   │   ├── models.py         # ToolResult, HookResult, etc.
│   │   ├── testing.py        # TestCoordinator, MockTool, etc.
│   │   └── validation.py     # check_protocol() (NEW)
│   └── pyproject.toml
│
├── amplifier-helpers/        # Convenience utilities (NEW)
│   ├── amplifier_helpers/
│   │   ├── decorators.py     # @tool, @hook
│   │   └── testing.py        # ToolTestHarness
│   └── pyproject.toml
│
├── amplifier-app-cli/        # CLI application
│   ├── amplifier_cli/
│   │   ├── commands/
│   │   │   ├── run.py
│   │   │   ├── dev.py        # Hot reload (NEW)
│   │   │   ├── inspect.py    # Event inspector (NEW)
│   │   │   ├── scaffold.py   # Templates (NEW)
│   │   │   ├── check.py      # Validation (NEW)
│   │   │   └── plan.py       # Visualizer (NEW)
│   │   └── main.py
│   └── pyproject.toml
│
└── amplifier-profiles/       # Profile management
    └── ...
\`\`\`

---

*Generated from Amplifier DX Documentation - Complete Site Export*
`;

    function downloadFullGuide() {
      const blob = new Blob([FULL_GUIDE_CONTENT], { type: 'text/markdown' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'amplifier-completeguide.md';
      a.click();
      URL.revokeObjectURL(url);
      toggleExportMenu();
    }
  </script>
</body>
</html>
